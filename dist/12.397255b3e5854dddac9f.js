(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"0zaF":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l=function(){}},"2HtA":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var l=n("mrSG"),a=(n("u3HK"),n("o3mN"),n("1qEl")),i=n("pTjd"),o=(n("h4+K"),function(e){function t(t,n,l){var a=e.call(this,{ignoreEmptyParams:!!n,requestParamsSortingPropertyName:"orderBy",searchTopicsOptions:{topicTypeName:i.b.CalendarTask,roomId:l.currentRoomId,service:n}})||this;return a.tasksService=t,a.topicSearchService=n,a.sessionService=l,a}return Object(l.c)(t,e),t.prototype.getResponseItemId=function(e){return e.TopicId+""},t.prototype.requestData=function(e){return this.tasksService.getCalendarTasks(e)},t.prototype.getTotalCount=function(e){return e.Success&&e.Result.TotalRowCount||0},t.prototype.convertResponseToResponseItems=function(e){return e.Success&&e.Result.CalendarTasks||[]},t}(a.a))},"3dhK":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var l=n("kU4r"),a=n("CcnG"),i=n("Ip0R"),o=n("pDRj"),r=a.Ua({encapsulation:0,styles:[l.a],data:{}});function s(e){return a.qb(0,[(e()(),a.Wa(0,0,null,null,3,"div",[["class","priority-label"]],[[8,"title",0]],null,null,null,null)),a.Va(1,278528,null,0,i.p,[a.v,a.l,a.H],{ngStyle:[0,"ngStyle"]},null),a.jb(2,{"background-color":0,color:1}),(e()(),a.ob(3,null,["",""]))],function(e,t){var n=t.component;e(t,1,0,e(t,2,0,n.backgroundColor,n.textColor))},function(e,t){var n=t.component;e(t,0,0,a.Ya(1,"",n.text,"")),e(t,3,0,n.text)})}function u(e){return a.qb(0,[(e()(),a.Na(16777216,null,null,1,null,s)),a.Va(1,16384,null,0,i.m,[a.T,a.Q],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,1,0,!t.component.isNullValue)},null)}var c=a.Sa("ti-task-priority-color-text-column-renderer",o.a,function(e){return a.qb(0,[(e()(),a.Wa(0,0,null,null,1,"ti-task-priority-color-text-column-renderer",[],null,null,null,u,r)),a.Va(1,49152,null,0,o.a,[],null,null)],null,null)},{text:"text",backgroundColor:"backgroundColor",priority:"priority"},{},[])},"6QGf":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var l=n("rV5w"),a=(n("mhJm"),function(){function e(e){this.cd=e,this.strings=tiStrings.app.misc,this.isLoading=!1,this.onTaskChange=new l.c,this.isSaveClicked=!1,this.isFormValid=!1}return e.prototype.ngDoCheck=function(){this.isFormValid=this.taskForm&&this.taskForm.dynamicForm&&this.taskForm.dynamicForm.formGroup&&this.taskForm.dynamicForm.formGroup.valid},e.prototype.refresh=function(e){this.task=e,this.task&&this.taskForm&&this.taskForm.refresh(),this.cd.detectChanges()},e.prototype.clear=function(){this.task=null,this.cd.detectChanges()},e.prototype.cancel=function(){this.task=Object.assign({},this.task);var e=Object.assign({},this.taskForm.formData);e.fields=this.taskForm.initialFieldValues,this.taskForm.formData=e,this.cd.detectChanges()},e.prototype.save=function(){this.taskForm&&(this.isSaveClicked=!0,this.taskForm.updateFieldValues())},e.prototype.onChangeLoadingStatus=function(e){this.isLoading=e},e.prototype.onFormResult=function(){this.onTaskChange.next(),this.isSaveClicked=!1},e}())},FJZI:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l=function(){}},PvKs:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l=function(){}},"S9/K":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var l=n("mrSG"),a=(n("u3HK"),n("b16z")),i=n("+JNW"),o=function(e){function t(t){var n=e.call(this)||this;return n.service=t,n}return Object(l.c)(t,e),t.prototype.requestData=function(e){return this.service.getCalendarTaskViews(e)},t.prototype.convertResponseToResponseItems=function(e){return e.ErrorCode===i.a.SUCCESS&&e.Result.length?e.Result:[]},t.prototype.convertDataToNodeConfig=function(e,t,n){return{text:e.ViewFilterDisplayName,additionalText:""+e.EntitiesCount,icon:"fa fa-list"}},t}(a.a)},SiGw:function(e,t,n){"use strict";var l=n("CcnG"),a=n("2b4T"),i=n("/KEZ"),o=n("gIcY"),r=n("Ip0R"),s=n("PwEE"),u=n("kcpl"),c=n("pzbB"),d=n("biCy"),p=n("40tY");n.d(t,"b",function(){return m}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return b});var m=l.Ua({encapsulation:0,styles:[["[_nghost-%COMP%]{overflow-y:auto;overflow-x:auto}"]],data:{}});function f(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,1,"ti-renderer",[],null,null,null,a.c,a.b)),l.Va(1,245760,null,0,i.a,[l.k],{component:[0,"component"],updater:[1,"updater"],data:[2,"data"]},null)],function(e,t){e(t,1,0,t.context.$implicit.renderer.component,t.context.$implicit.renderer.updater,t.context.$implicit.renderer.data)},null)}function g(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,7,"form",[["class","k-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var a=!0;return"submit"===t&&(a=!1!==l.gb(e,2).onSubmit(n)&&a),"reset"===t&&(a=!1!==l.gb(e,2).onReset()&&a),a},null,null)),l.Va(1,16384,null,0,o.z,[],null,null),l.Va(2,540672,null,0,o.k,[[8,null],[8,null]],{form:[0,"form"]},null),l.lb(2048,null,o.c,null,[o.k]),l.Va(4,16384,null,0,o.q,[[4,o.c]],null,null),(e()(),l.Na(16777216,null,null,1,null,f)),l.Va(6,278528,null,0,r.l,[l.T,l.Q,l.u],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),l.fb(null,0)],function(e,t){var n=t.component;e(t,2,0,n.formGroup),e(t,6,0,n.fieldsToGenerate,n.trackByFn)},function(e,t){e(t,0,0,l.gb(t,4).ngClassUntouched,l.gb(t,4).ngClassTouched,l.gb(t,4).ngClassPristine,l.gb(t,4).ngClassDirty,l.gb(t,4).ngClassValid,l.gb(t,4).ngClassInvalid,l.gb(t,4).ngClassPending)})}function h(e){return l.qb(0,[l.mb(402653184,1,{container:0}),(e()(),l.Na(16777216,null,null,1,null,g)),l.Va(2,16384,null,0,r.m,[l.T,l.Q],{ngIf:[0,"ngIf"]},null),(e()(),l.Wa(3,0,null,null,1,"kendo-resize-sensor",[],null,[[null,"resize"]],function(e,t,n){var l=!0;return"resize"===t&&(l=!1!==e.component.onResize()&&l),l},s.b,s.a)),l.Va(4,12763136,null,0,c.a,[u.a,l.l,l.B,l.H],null,{resize:"resize"})],function(e,t){e(t,2,0,t.component.fieldsToGenerate)},null)}var b=l.Sa("ti-dynamic-form",d.a,function(e){return l.qb(0,[(e()(),l.Wa(0,16777216,null,null,1,"ti-dynamic-form",[],null,null,null,h,m)),l.Va(1,245760,null,0,d.a,[o.f,p.a,l.T,l.l,l.i],null,null)],function(e,t){e(t,1,0)},null)},{formConfig:"formConfig",fieldsFilter:"fieldsFilter",dynamicFieldsService:"dynamicFieldsService",isWide:"isWide",data:"data"},{},["*"])},SyiL:function(e,t,n){"use strict";var l=n("CcnG"),a=function(){};n.d(t,"a",function(){return r});var i=l.Ua({encapsulation:2,styles:[],data:{}});function o(e){return l.qb(0,[],null,null)}var r=l.Sa("ti-task-tree",a,function(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,1,"ti-task-tree",[],null,null,null,o,i)),l.Va(1,49152,null,0,a,[],null,null)],null,null)},{},{},[])},YyjN:function(e,t,n){"use strict";var l=n("CcnG"),a=n("SiGw"),i=n("biCy"),o=n("gIcY"),r=n("40tY"),s=n("q1lY"),u=n("LWGt"),c=n("UcrS"),d=n("i7EX"),p=n("0pig"),m=n("kvVq"),f=n("uuQf"),g=n("ghgs"),h=n("Z1u7"),b=n("Gcy8"),k=n("OHd8"),v=n("dfm8"),T=n("2R3+"),y=n("PqSV"),C=n("r4+f"),F=n("3abG"),S=n("mrSG"),w=n("6l49"),I=n("GpL1"),x=n("JbnH"),V=n("o3mN"),D=n("egDL"),N=n("UrX+"),O=function(e){function t(t,n,a,i,o){var r=e.call(this)||this;return r.fileUploadService=t,r.sessionService=n,r.documentManagerService=a,r.taskFormService=i,r.cd=o,r.deleteAttachment=new l.n,r.addAttachment=new l.n,r.attachments=[],r.strings=tiStrings.app.misc,r}return Object(S.c)(t,e),Object.defineProperty(t.prototype,"task",{set:function(e){this._task=e,this.setAttachments(this._task)},enumerable:!0,configurable:!0}),t.prototype.setAttachments=function(e){this.attachments=e&&e.Attachments&&e.Attachments.length?e.Attachments.slice():[]},t.prototype.browseFiles=function(){this.browseInput.nativeElement.value="",this.browseInput.nativeElement.click()},t.prototype.handleFiles=function(e){var t=this,n=e.target.files[0],l={FileName:n.name,FileToken:null,FileId:null};this.fileUploadService.uploadFile(n,this.taskFormService.siteId).subscribe(function(e){e.Result&&e.Result.FileToken&&(l.FileToken=e.Result.FileToken,l.FileId=e.Result.FileToken,t.attachments.push(l),t.addAttachment.emit(l),t.cd.detectChanges())})},t.prototype.removeTag=function(e){e.preventDefault();var t=this.attachments.findIndex(function(t){return t.FileId===e.dataItem.FileId});this.attachments.splice(t,1),this.deleteAttachment.emit(e.dataItem)},t.prototype.openMultiSelect=function(e){e.preventDefault()},t.prototype.downloadFile=function(e,t){if(e.preventDefault(),!t.FileToken){var n=D.a.saveTopicFileWithUrl.replace(/{serviceName}/,""+this.documentManagerService.serviceUrl).replace(/{siteId}/,""+this.taskFormService.siteId).replace(/{TopicId}/,""+this._task.TopicId).replace(/{attachmentId}/,""+t.FileId);window.open(n)}},t.prototype.reset=function(){this.setAttachments(this._task)},t}(x.a),P=l.Ua({encapsulation:0,styles:[[".field[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.field[_ngcontent-%COMP%]   ti-form-field-label[_ngcontent-%COMP%]{width:30%;max-width:200px;min-width:120px}.field[_ngcontent-%COMP%]   .multiselect-wrapper[_ngcontent-%COMP%]{width:70%;min-width:200px;flex-grow:1;display:flex;align-items:flex-start;flex-wrap:wrap}.field[_ngcontent-%COMP%]   .multiselect-wrapper[_ngcontent-%COMP%]   kendo-multiselect[_ngcontent-%COMP%]{width:auto;flex-basis:200px;flex-grow:1;margin:0 5px 5px 0}.field[_ngcontent-%COMP%]   .multiselect-wrapper[_ngcontent-%COMP%]   kendo-multiselect[_ngcontent-%COMP%]   span.filename[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.field[_ngcontent-%COMP%]   .multiselect-wrapper[_ngcontent-%COMP%]   .upload-file-button[_ngcontent-%COMP%]{display:none}"]],data:{}});function M(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,1,"span",[["class","filename"]],[[8,"title",0]],[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.downloadFile(n,e.context.$implicit)&&l),l},null,null)),(e()(),l.ob(1,null,["",""]))],null,function(e,t){e(t,0,0,t.context.$implicit.FileName),e(t,1,0,t.context.$implicit.FileName)})}function R(e){return l.qb(0,[l.mb(402653184,1,{browseInput:0}),(e()(),l.Wa(1,0,null,null,30,"div",[["class","field"]],[[2,"wide",null],[2,"busy",null]],null,null,null,null)),(e()(),l.Wa(2,0,null,null,1,"ti-form-field-label",[],null,null,null,s.b,s.a)),l.Va(3,49152,null,0,u.a,[],{config:[0,"config"]},null),(e()(),l.Wa(4,0,null,null,27,"div",[["class","multiselect-wrapper"]],null,null,null,null,null)),(e()(),l.Wa(5,0,null,null,20,"kendo-multiselect",[["textField","FileName"],["valueField","FileId"]],[[8,"title",0],[8,"id",0],[2,"k-widget",null],[2,"k-multiselect",null],[2,"k-header",null],[1,"dir",0],[2,"k-state-focused",null],[2,"k-state-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"removeTag"],[null,"open"]],function(e,t,n){var l=!0,a=e.component;return"ngModelChange"===t&&(l=!1!==(a.attachments=n)&&l),"removeTag"===t&&(l=!1!==a.removeTag(n)&&l),"open"===t&&(l=!1!==a.openMultiSelect(n)&&l),l},c.h,c.d)),l.lb(6144,null,m.a,null,[f.a]),l.lb(256,null,k.a,"kendo.multiselect",[]),l.lb(131584,null,k.b,k.b,[k.a,[2,T.a],[2,v.a]]),l.lb(512,null,g.a,g.a,[]),l.lb(512,null,d.a,d.a,[]),l.lb(512,null,h.b,h.b,[d.a]),l.Va(12,7323648,null,7,f.a,[k.b,y.b,g.a,h.b,d.a,l.i,l.v,l.H,l.l,l.B,[2,p.a]],{data:[0,"data"],valueField:[1,"valueField"],textField:[2,"textField"],clearButton:[3,"clearButton"]},{open:"open",removeTag:"removeTag"}),l.mb(335544320,2,{template:0}),l.mb(335544320,3,{customItemTemplate:0}),l.mb(335544320,4,{headerTemplate:0}),l.mb(335544320,5,{footerTemplate:0}),l.mb(335544320,6,{tagTemplate:0}),l.mb(335544320,7,{groupTagTemplate:0}),l.mb(335544320,8,{noDataTemplate:0}),l.lb(1024,null,o.n,function(e){return[e]},[f.a]),l.Va(21,671744,null,0,o.s,[[8,null],[8,null],[8,null],[6,o.n]],{model:[0,"model"]},{update:"ngModelChange"}),l.lb(2048,null,o.o,null,[o.s]),l.Va(23,16384,null,0,o.p,[[4,o.o]],null,null),(e()(),l.Na(0,null,null,1,null,M)),l.Va(25,16384,[[6,4]],0,b.a,[l.Q],null,null),(e()(),l.Wa(26,0,[[1,0],["browseInput",1]],null,0,"input",[["class","upload-file-button"],["type","file"]],null,[[null,"change"]],function(e,t,n){var l=!0;return"change"===t&&(l=!1!==e.component.handleFiles(n)&&l),l},null,null)),(e()(),l.Wa(27,0,null,null,4,"button",[["kendoButton",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0]],[[null,"click"]],function(e,t,n){var a=!0,i=e.component;return"click"===t&&(a=!1!==l.gb(e,30).onClick()&&a),"click"===t&&(a=!1!==i.browseFiles()&&a),a},null,null)),l.lb(256,null,k.a,"kendo.button",[]),l.lb(131584,null,k.b,k.b,[k.a,[2,T.a],[2,v.a]]),l.Va(30,9125888,null,0,F.a,[l.l,l.H,[2,C.a],k.b,l.B],{primary:[0,"primary"]},null),(e()(),l.ob(31,null,["",""]))],function(e,t){var n=t.component;e(t,3,0,n.config),e(t,12,0,n.attachments,"FileId","FileName",!1),e(t,21,0,n.attachments),e(t,30,0,!0)},function(e,t){var n=t.component;e(t,1,0,null==n.config.UIData?null:n.config.UIData.isWide,n.isBusy),e(t,5,1,[n.config.fieldTitle,n.config.fieldName,l.gb(t,12).widgetClasses,l.gb(t,12).widgetClasses,l.gb(t,12).widgetClasses,l.gb(t,12).dir,l.gb(t,12).focusedClass,l.gb(t,12).disabledClass,l.gb(t,23).ngClassUntouched,l.gb(t,23).ngClassTouched,l.gb(t,23).ngClassPristine,l.gb(t,23).ngClassDirty,l.gb(t,23).ngClassValid,l.gb(t,23).ngClassInvalid,l.gb(t,23).ngClassPending]),e(t,27,0,l.gb(t,30).classButton,l.gb(t,30).classDisabled,l.gb(t,30).classPrimary,l.gb(t,30).isFlat,l.gb(t,30).isBare,l.gb(t,30).isOutline,l.gb(t,30).classActive,l.gb(t,30).dir),e(t,31,0,n.strings.add)})}var W=n("Ip0R");n("mhJm"),n("r9sr"),n("u3HK"),n("e2Dx"),n("8tIk"),n.d(t,"a",function(){return A}),n.d(t,"b",function(){return L});var A=l.Ua({encapsulation:0,styles:[["ti-dynamic-form[_ngcontent-%COMP%]{width:100%}ti-dynamic-form[_ngcontent-%COMP%]   ti-task-attachments[_ngcontent-%COMP%]{width:100%;padding:0 2rem}.edit-history[_ngcontent-%COMP%]{padding:0 2rem}"]],data:{}});function G(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,7,"div",[["class","edit-history"]],null,null,null,null,null)),(e()(),l.Wa(1,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),l.Wa(2,0,null,null,1,"b",[],null,null,null,null,null)),(e()(),l.ob(3,null,["",""])),(e()(),l.Wa(4,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l.ob(5,null,[""," "," "," ",""])),(e()(),l.Wa(6,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),l.ob(7,null,[""," "," "," ",""]))],null,function(e,t){var n=t.component;e(t,3,0,n.strings.editHistory),e(t,5,0,n.strings.taskCreatedBy,n.editHistory.createdBy,n.strings.on,n.editHistory.createdDate),e(t,7,0,n.strings.lastUpdatedBy,n.editHistory.updatedBy,n.strings.on,n.editHistory.updatedDate)})}function B(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l.Wa(1,16777216,null,null,3,"ti-dynamic-form",[],[[2,"with-actions",null]],null,null,a.c,a.b)),l.Va(2,245760,[[1,4],["dynamicForm",4]],0,i.a,[o.f,r.a,l.T,l.l,l.i],{formConfig:[0,"formConfig"],dynamicFieldsService:[1,"dynamicFieldsService"],data:[2,"data"]},null),(e()(),l.Wa(3,0,null,0,1,"ti-task-attachments",[],null,[[null,"addAttachment"],[null,"deleteAttachment"]],function(e,t,n){var l=!0,a=e.component;return"addAttachment"===t&&(l=!1!==a.addAttachment(n)&&l),"deleteAttachment"===t&&(l=!1!==a.deleteAttachment(n)&&l),l},R,P)),l.Va(4,245760,null,0,O,[w.a,V.a,I.a,N.a,l.i],{config:[0,"config"],task:[1,"task"]},{deleteAttachment:"deleteAttachment",addAttachment:"addAttachment"}),(e()(),l.Na(16777216,null,null,1,null,G)),l.Va(6,16384,null,0,W.m,[l.T,l.Q],{ngIf:[0,"ngIf"]},null),(e()(),l.Na(0,null,null,0))],function(e,t){var n=t.component;e(t,2,0,n.formConfig,n.taskDynamicFieldsService,n.formData),e(t,4,0,n.attachmentFieldConfig,n.task),e(t,6,0,n.task&&n.editHistory)},function(e,t){var n=t.component;e(t,1,0,null==n.formData?null:null==n.formData.actions?null:n.formData.actions.length)})}function L(e){return l.qb(0,[l.mb(671088640,1,{dynamicForm:0}),(e()(),l.Na(16777216,null,null,1,null,B)),l.Va(2,16384,null,0,W.m,[l.T,l.Q],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,2,0,t.component.visible)},null)}},ZXLx:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l=function(){}},biCy:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var l=n("gIcY"),a=(n("YuQZ"),n("8GOV"),n("/w0U")),i=n("Gi3i"),o=n("wd/R"),r=(n("40tY"),n("C7+f")),s=n("wGN9"),u=function(){function e(e,t,n,l,a){this.formBuilder=e,this.componentLoadingService=t,this.vcRef=n,this.elRef=l,this.cdr=a,this.criticalWidth=450,this.value={},this.mask=t.createMask(n)}return Object.defineProperty(e.prototype,"data",{set:function(e){var t=this;if(this._data=e,e)if(e.form||this.formConfig){e.form&&(this.formConfig=e.form);var n=this.getValuesHash(e.fields);this.generateForm(n).take(1).subscribe(function(){setTimeout(function(){t.setValue(n),t.initEvents()},0)})}else this.cleanupForm();else this.cleanupForm()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.formGroupChange$&&this.formGroupChange$.unsubscribe(),this.formGroupSpecialFieldsChange$&&this.formGroupSpecialFieldsChange$.unsubscribe()},e.prototype.generateForm=function(e,t){var n=this;return this.mask.show(),this.dynamicFieldsService.prepareForm(this.formConfig.formFields,e||this.value,t).take(1).do(function(e){n.formGroup||(n.formGroup=n.formBuilder.group({})),n.fieldsToGenerate=(e||n.formConfig.formFields).filter(n.fieldsFilter||function(e){return s.a.Is.includeInCoding(e)}).map(function(e){return e.UIData=e.UIData||{},e.UIData.isWide=n.isWide,n.dynamicFieldsService.registerField(n.formGroup,n.formBuilder,e,function(e){return s.a.Is.readOnly(e.flags)},function(e){return s.a.Is.required(e.flags)?l.x.required:null},n.value[e.fieldName])})}).do(function(){n.mask.hide()})},e.prototype.initEvents=function(){var e=this;this.formGroupChange$&&this.formGroupChange$.unsubscribe(),this.formGroupChange$=this.formGroup.valueChanges.pipe(Object(i.a)(100)).subscribe(function(t){return e.onFormChange(t)}),this.formGroupSpecialFieldsChange$&&this.formGroupSpecialFieldsChange$.unsubscribe(),this.formGroupSpecialFieldsChange$=this.dynamicFieldsService.getOnSpecialFieldsChangeSubscription(this.formGroup).pipe(Object(i.a)(100)).subscribe(function(t){e.needFormRebuild=!0})},e.prototype.cleanupForm=function(){var e=this;this.formGroup&&(this.formGroup.reset(),Object.keys(this.formGroup.controls).forEach(function(t){e.formGroup.removeControl(t)}),this.formGroup=null,this.fieldsToGenerate=null)},e.prototype.setValue=function(e){e&&(this.value=e,this.formGroup.patchValue(e,{emitEvent:!0}))},e.prototype.getValue=function(){var e=this;return this.formConfig.formFields.filter(function(t){return void 0!==e.value[t.fieldName]&&null!==e.value[t.fieldName]}).map(function(t){return{name:t.fieldName,title:t.fieldTitle,type:t.fieldType,value:a.a.TopicFields.getPreparedFieldValueDB(e.value[t.fieldName],t.fieldType)}})},e.prototype.getValuesHash=function(e){var t,n={};return e.forEach(function(e){n[e.name]=null}),t=e.filter(function(e){return null===n[e.name]}),Object.assign.apply(Object,[n].concat(t.map(function(e){var t;return(t={})[e.name]=a.a.TopicFields.getPreparedFieldValueUI(e.value,e.type),t})))},e.prototype.onFormChange=function(e){var t=this;Object.keys(e).map(function(t){return e[t]}).every(function(e){return null===e})||(Object.assign(this.value,e),this.needFormRebuild&&(this.needFormRebuild=!1,this.generateForm(null,!0).take(1).subscribe(function(){t.formGroup.patchValue(t.value,{emitEvent:!1})})))},e.prototype.trackByFn=function(e,t){return t.fieldName},e.prototype.convertToFormModel=function(e){var t=this;e=e||this.value;var n={};return Object.keys(this.formGroup.controls).forEach(function(l){n[l]=void 0===e[l]?null:t.value[l]}),n},e.prototype.getTopicFields=function(){return this.getValue().map(function(e){var t=e.value;return e.type===r.a.Date&&(t=o(a.a.DateAndTime.fromCSharpString(t)).format("MM/DD/YYYY")),{Fieldvalue:t,FieldName:e.name,FieldType:e.type}})},e.prototype.validate=function(){},e.prototype.onResize=function(){var e=this;this.isWide=this.elRef.nativeElement.offsetWidth>=this.criticalWidth,this.formConfig&&this.formConfig.formFields&&(this.formConfig.formFields.forEach(function(t){t.UIData=t.UIData||{},t.UIData.isWide=e.isWide}),this.cdr.detectChanges())},e}()},cAyq:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var l=n("kU4r"),a=n("CcnG"),i=n("Ip0R"),o=n("vJjD"),r=n("o3mN"),s=n("h4+K"),u=a.Ua({encapsulation:0,styles:[l.a],data:{}});function c(e){return a.qb(0,[(e()(),a.Wa(0,0,null,null,3,"div",[["class","priority-label"]],[[8,"title",0]],null,null,null,null)),a.Va(1,278528,null,0,i.p,[a.v,a.l,a.H],{ngStyle:[0,"ngStyle"]},null),a.jb(2,{"background-color":0,color:1}),(e()(),a.ob(3,null,["",""]))],function(e,t){var n=t.component;e(t,1,0,e(t,2,0,n.backgroundColor,n.textColor))},function(e,t){var n=t.component;e(t,0,0,a.Ya(1,"",n.text,"")),e(t,3,0,n.text)})}function d(e){return a.qb(0,[(e()(),a.Na(16777216,null,null,1,null,c)),a.Va(1,16384,null,0,i.m,[a.T,a.Q],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,1,0,!t.component.isNullValue)},null)}var p=a.Sa("ti-task-status-color-text-column-renderer",o.a,function(e){return a.qb(0,[(e()(),a.Wa(0,0,null,null,1,"ti-task-status-color-text-column-renderer",[],null,null,null,d,u)),a.Va(1,49152,null,0,o.a,[a.i,r.a,s.a],null,null)],null,null)},{text:"text",backgroundColor:"backgroundColor",status:"status"},{},[])},e2Dx:function(e,t,n){"use strict";var l=n("mrSG"),a=n("rV5w"),i=n("YuQZ"),o=n("pTjd"),r=n("1TDC"),s=n("dgYu"),u=n("8GOV"),c=(n("h4+K"),function(e){return e[e.Completed=1]="Completed",e[e.NotStarted=2]="NotStarted",e[e.InProgress=3]="InProgress",e[e.Deferred=4]="Deferred",e[e.WaitingOnSomeoneElse=5]="WaitingOnSomeoneElse",e}({})),d=function(e){return e[e.Low=1]="Low",e[e.Normal=2]="Normal",e[e.High=3]="High",e}({}),p=n("2ber"),m=n("C7+f"),f=(n("o3mN"),n("SVYi")),g=n("C61F");n("UrX+"),n.d(t,"a",function(){return h});var h=function(e){function t(t,n,l){var a=e.call(this)||this;return a.sessionService=t,a.topicSearchService=n,a.taskFormService=l,a.strings=tiStrings.tiComponents.tasks.services.taskDynamicService,a.topics=[],a.taskPriorities=[{name:a.strings.low,value:1},{name:a.strings.normal,value:2},{name:a.strings.high,value:3}],a}return Object(l.c)(t,e),t.prototype.getComponentClass=function(t){switch(t.fieldName){case f.a.Tasks.Priority:case f.a.Tasks.Status:case f.a.Tasks.Category:return r.a;case f.a.Tasks.Reminder:return p.a;case f.a.Tasks.AssignedToIds:return g.a}return e.prototype.getComponentClass.call(this,t)},t.prototype.customizeFormConfig=function(e){var t=this;return a.b.create(function(n){t.addCustomFieldSettings(e);var l=e.formFields.find(function(e){return e.fieldName===f.a.Tasks.Priority}),a=e.formFields.find(function(e){return e.fieldName===f.a.Tasks.Status}),i=e.formFields.find(function(e){return e.fieldName===f.a.Tasks.Category}),o=t.taskFormService.siteId;t.getRoomTopics(o).subscribe(function(e){t.topics[o]=e,a.lookupFieldValues=t.convertTopicListToLookupFieldValues(e.statusesTopics),i.lookupFieldValues=t.convertTopicListToLookupFieldValues(e.categoriesTopics),l.lookupFieldValues=e.taskPriorities,n.next()})})},t.prototype.addCustomFieldSettings=function(e){var t=e.formFields.find(function(e){return e.fieldName===f.a.Tasks.CompletePercent}),n=e.formFields.find(function(e){return e.fieldName===f.a.Tasks.Description}),l=e.formFields.find(function(e){return e.fieldName===f.a.Tasks.AssignedToIds}),a=e.formFields.find(function(e){return e.fieldName===f.a.Tasks.Category});t.customFieldSettings={spinners:!0,minValue:0,maxValue:100,autoCorrect:!0,step:25,styles:{width:"135px"}},n.customFieldSettings={styles:{height:"75px"}},l.customFieldSettings={disabled:this.taskFormService.siteId===this.sessionService.domain.id||!this.taskFormService.adminOrHigher,multiMode:this.createMode},a.customFieldSettings={defaultItem:{value:"",name:"["+this.strings.notSpecified+"]"}}},t.prototype.getRoomTopics=function(e){if(this.topics[e])return a.b.of(this.topics[e]);var t=o.a.CalendarTaskStatus,n=o.a.CalendarTaskCategory;return this.taskFormService.siteId!==this.sessionService.domain.id?this.getRoomTaskTopics(t,n):this.getDomainTaskTopics(t,n)},t.prototype.getRoomTaskTopics=function(e,t){var n=this,l={additionalTopicTypeIds:[e],topicTypeId:e,siteId:this.sessionService.domain.id},i={additionalTopicTypeIds:[t],topicTypeId:t,siteId:this.taskFormService.siteId};return a.b.create(function(e){var t=n.topicSearchService.searchTopics(l),o=n.topicSearchService.searchTopics(i);a.b.zip(t,o).subscribe(function(t){var l,a={statusesTopics:[],categoriesTopics:[],taskPriorities:n.taskPriorities};t[0].Result&&t[0].Result.TopicList&&(a.statusesTopics=t[0].Result.TopicList),t[1].Result&&t[1].Result.TopicList&&(a.categoriesTopics=t[1].Result.TopicList),n.statusesTopics=(l=[a.statusesTopics,a.categoriesTopics])[0],n.categoriesTopics=l[1],e.next(a)})})},t.prototype.getDomainTaskTopics=function(e,t){var n=this,l={additionalTopicTypeIds:[e,t],topicTypeId:e,siteId:this.sessionService.domain.id};return a.b.create(function(a){n.topicSearchService.searchTopics(l).subscribe(function(l){var i;if(0===l.ErrorCode&&l.Result&&l.Result.TopicList){var o={statusesTopics:l.Result.TopicList.filter(function(t){return t.TopicTypeId===e}),categoriesTopics:l.Result.TopicList.filter(function(e){return e.TopicTypeId===t}),taskPriorities:n.taskPriorities};n.statusesTopics=(i=[o.statusesTopics,o.categoriesTopics])[0],n.categoriesTopics=i[1],a.next(o)}})})},t.prototype.convertTopicListToLookupFieldValues=function(e){return e.map(function(e){return{name:e.TopicName,value:e.TopicId.toString()}})},t.prototype.generateDefaultTaskFields=function(){return[i.a.create(f.a.Tasks.Priority,f.a.Tasks.Priority,this.getDefaultFieldValue(f.a.Tasks.Priority),m.a.Number),i.a.create(f.a.Tasks.Status,f.a.Tasks.Status,this.getDefaultFieldValue(f.a.Tasks.Status),m.a.Number),i.a.create(f.a.Tasks.CompletePercent,f.a.Tasks.CompletePercent,this.getDefaultFieldValue(f.a.Tasks.CompletePercent),m.a.Number),i.a.create(f.a.Tasks.AssignedToIds,f.a.Tasks.AssignedToIds,this.getDefaultFieldValue(f.a.Tasks.AssignedToIds),m.a.Text),i.a.create(f.a.Tasks.Assign,f.a.Tasks.Assign,this.getDefaultFieldValue(f.a.Tasks.Assign),m.a.Text),i.a.create(f.a.Tasks.Owner,f.a.Tasks.Owner,this.getDefaultFieldValue(f.a.Tasks.Owner),m.a.Text)]},t.prototype.getDefaultFieldValue=function(e){switch(e){case f.a.Tasks.Priority:return d.Normal;case f.a.Tasks.CompletePercent:return 0;case f.a.Tasks.Status:var t=this.statusesTopics.find(function(e){return s.a.getTopicFieldValue(e.TopicFields,"CalendarTaskStatusId")===c.NotStarted});return t?t.TopicId:null;case f.a.Tasks.AssignedToIds:return String(this.sessionService.user.details.UserId);case f.a.Tasks.Assign:case f.a.Tasks.Owner:return this.sessionService.user.details.FullName}},t}(u.a)},fAKO:function(e,t,n){"use strict";var l=n("CcnG"),a=n("A7o+"),i=n("S3+s"),o=n("gIcY"),r=n("+mt7"),s=n("HnAS"),u=n("3Syc"),c=n("ml9Q"),d=n("9pSD"),p=n("emp+"),m=n("LczP"),f=n("L2C2"),g=n("WFE3"),h=n("OHd8"),b=n("2R3+"),k=n("dfm8"),v=function(){function e(e){this.component=e}return e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){if(this.component.element){var e=this.component.element.nativeElement,t=this.component,n=1;if(e){var l=e.getElementsByTagName("kendo-calendar-header")[0];if(l){var a=l.getElementsByClassName("k-today")[0];a&&(a.style.display="none");var i=l.getElementsByClassName("k-title")[0];if(i){var o=function(e,l){void 0===l&&(l="month");var a,i=t.focusedDate,o=0,r=0;"decade"===l&&(n=10),"century"===l&&(n=100),a=e?n:-n,"year"===l&&(r=0,o=a),"month"===l&&(r=a,o=0),"decade"===l&&(r=0,o=a),"century"===l&&(r=0,o=a);var s=i.getFullYear()+o,u=i.getMonth()+r;(function(e){return e<=t.max.getFullYear()&&e>=t.min.getFullYear()})(s)&&function(e){return e<=t.max.getMonth()&&e>=t.min.getMonth()}(u)&&(t.focusedDate=new Date(s,u,1))},r=document.createElement("span");r.className="fa fa-arrow-left left-navigation-arrow",r.addEventListener("click",function(){o(!1,t.activeView)});var s=document.createElement("span");s.className="fa fa-arrow-right right-navigation-arrow",s.addEventListener("click",function(){o(!0,t.activeView)}),i.parentNode.insertBefore(r,i),i.parentNode.insertBefore(s,i.nextSibling)}}}}},e}(),T=n("Ip0R"),y=n("PqSV"),C=n("Almv"),F=n("MZ/Y"),S=n("JkaZ"),w=n("o0qz"),I=n("aHBE"),x=n("/Cf6"),V=function(){function e(){this.showCalendar=!0,this.calendarMonthValue=null,this.calendarYearValue=null,this.yearSub=null,this.startDate=null,this.dueDate=null,this.dateFilter="",this.tabIndex=0,this.showMonthCalendar=!1,this.showYearCalendar=!1,this.keepContent=!1}return e.prototype.ngOnInit=function(){this.showMonthCalendar=!0,this.showYearCalendar=!0},e.prototype.ngAfterViewInit=function(){var e=this;this.monthCalendar.valueChange.subscribe(function(t){return e.changeDateFilter(t)})},e.prototype.onTabSelect=function(e){var t=this;this.tabIndex=e.index,this.keepContent=!0,this.yearSub||setTimeout(function(e){return t.yearSub=t.yearCalendar.valueChange.subscribe(function(e){return t.changeDateFilter(e)})},0)},e.prototype.clearDateFilter=function(){this.calendarMonthValue=null,this.calendarYearValue=null,this.startDate=null,this.dueDate=null,this.dateFilter="",this.onDateFilterChanged()},e.prototype.changeDateFilter=function(e){this.dateFilter=this.getFilter(this.tabIndex),this.onDateFilterChanged()},e.prototype.onDateFilterChanged=function(){console.log(arguments)},e.prototype.getFilter=function(e){switch(e){case 0:return this.calendarMonthValue?this.createFilter(this.calendarMonthValue,"single").slice(0,10):"";case 1:return this.calendarYearValue?this.createFilter(this.calendarYearValue,"single").slice(0,7):"";case 2:return this.calendarYearValue?this.createFilter([this.startDate,this.dueDate],"range"):"";default:return this.calendarMonthValue}},e.prototype.createFilter=function(e,t){return e&&"single"===t?e.toISOString():e&&"range"===t?"date > "+e[0].toISOString().slice(0,10)+" AND date < "+e[1].toISOString().slice(0,10):""},e}();n.d(t,"a",function(){return _});var D=l.Ua({encapsulation:2,styles:[[".k-calendar-header{padding-top:0}.calendar-tree-tabs .k-content{padding:0;height:100%;overflow-y:hidden}.calendar-tree-tabs .tab-title{font-size:1.2rem;height:30px;line-height:30px}.calendar-tree-tabs.k-tabstrip>.k-tabstrip-items>.k-item.k-state-active{border:none}.calendar-tree-tabs.k-tabstrip>.k-tabstrip-items>.k-item.k-state-active .k-link .tab-title{border-bottom:2px solid #263a70}.calendar-tree-view-container{padding-top:15px;height:100%}.calendar-tree-view-container .k-calendar-header.k-today{display:none}.calendar-tree-view-container .field{margin-top:.5rem}.calendar-tree-view-container kendo-datepicker{font-weight:700;width:100%}.calendar-tree-view-container kendo-datepicker .k-select .k-icon.k-i-calendar{color:#e6e6e6}.calendar-tree-view-container kendo-datepicker .k-select .k-icon.k-i-calendar:hover{color:#444}.calendar-tree-view-container .calendar-tree-view{height:calc(100% - 2px);width:calc(100% - 2px);overflow:hidden;border:none}.calendar-tree-view-container .date-dropdown-icon{padding-left:2px;font-size:12px;color:#263a70;font-weight:400}.calendar-tree-view-container table{width:100%}.calendar-tree-view-container .k-calendar-monthview .k-content .k-calendar-view .k-content .k-link,.calendar-tree-view-container .k-calendar-monthview .k-content .k-link{width:auto}.calendar-tree-view-container .k-calendar .k-content.k-scrollable{overflow-y:hidden}.calendar-tree-view-container .k-calendar .k-content td.k-state-selected .k-link{background-color:#fe5f55;border-radius:5px}.calendar-tree-view-container .k-calendar .k-content .k-today .k-link{box-shadow:none;background-color:#f1f9ff}.calendar-tree-view-container .k-calendar-yearview .k-content .k-link{border-radius:0}.calendar-tree-view-container .k-calendar-monthview .k-content>table,.calendar-tree-view-container .k-calendar-view .k-content>table{width:100%}.calendar-tree-view-container .k-calendar-monthview .k-calendar-header .k-title,.calendar-tree-view-container .k-calendar-view .k-calendar-header .k-title{margin-left:0}.calendar-tree-view-container .k-title{font-size:1.333rem}.left-navigation-arrow,.right-navigation-arrow{cursor:pointer;font-size:1.333rem}.clear-all-btn{position:absolute;top:5px;right:5px;border-radius:5px}"]],data:{}});function N(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,1,"span",[["class","tab-title"]],null,null,null,null,null)),(e()(),l.ob(-1,null,["Month"]))],null,null)}function O(e){return l.qb(0,[(e()(),l.ob(0,null,[" ",""])),l.ib(131072,a.i,[a.j,l.i]),(e()(),l.Wa(2,0,null,null,0,"span",[["class","fa fa-chevron-down date-dropdown-icon"]],null,null,null,null,null))],null,function(e,t){e(t,0,0,l.pb(t,0,0,l.gb(t,1).transform(t.context.$implicit)))})}function P(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,19,"kendo-calendar",[["class","calendar-tree-view"],["tiKendoCalendarHeaderTemplate",""]],[[1,"id",0],[1,"role",0],[1,"tabindex",0],[1,"aria-disabled",0],[2,"k-state-disabled",null],[1,"aria-activedescendant",0]],[[null,"valueChange"]],function(e,t,n){var l=!0;return"valueChange"===t&&(l=!1!==(e.component.calendarMonthValue=n)&&l),l},i.f,i.a)),l.lb(5120,null,o.n,function(e){return[e]},[d.a]),l.lb(5120,null,o.m,function(e){return[e]},[d.a]),l.lb(135680,null,h.b,h.b,[h.a,[2,b.a],[2,k.a]]),l.lb(512,null,f.a,f.a,[l.s]),l.lb(512,null,p.a,p.a,[f.a]),l.lb(512,null,r.a,r.a,[m.a,l.B]),l.Va(7,9158656,[[1,4],["monthCalendar",4]],8,d.a,[f.a,m.a,l.l,p.a,l.H,l.i,l.B,l.s,r.a,[2,u.a]],{value:[0,"value"],navigation:[1,"navigation"],topView:[2,"topView"]},{valueChange:"valueChange"}),l.mb(335544320,6,{cellTemplate:0}),l.mb(335544320,7,{monthCellTemplate:0}),l.mb(335544320,8,{yearCellTemplate:0}),l.mb(335544320,9,{decadeCellTemplate:0}),l.mb(335544320,10,{centuryCellTemplate:0}),l.mb(335544320,11,{weekNumberTemplate:0}),l.mb(335544320,12,{headerTitleTemplate:0}),l.mb(335544320,13,{navigationItemTemplate:0}),l.Va(16,212992,null,0,v,[d.a],null,null),l.lb(256,null,h.a,"kendo.calendar",[]),(e()(),l.Na(0,null,null,1,null,O)),l.Va(19,16384,[[12,4]],0,c.a,[l.Q],null,null)],function(e,t){e(t,7,0,t.component.calendarMonthValue,!1,"year"),e(t,16,0)},function(e,t){e(t,0,0,l.gb(t,7).widgetId,l.gb(t,7).widgetRole,l.gb(t,7).calendarTabIndex,l.gb(t,7).ariaDisabled,l.gb(t,7).ariaDisabled,l.gb(t,7).ariaActivedescendant)})}function M(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,2,"div",[["class","calendar-tree-view-container"]],null,null,null,null,null)),(e()(),l.Na(16777216,null,null,1,null,P)),l.Va(2,16384,null,0,T.m,[l.T,l.Q],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,2,0,t.component.showMonthCalendar)},null)}function R(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,1,"span",[["class","tab-title"]],null,null,null,null,null)),(e()(),l.ob(-1,null,["Year"]))],null,null)}function W(e){return l.qb(0,[(e()(),l.ob(0,null,[" ",""])),l.ib(131072,a.i,[a.j,l.i]),(e()(),l.Wa(2,0,null,null,0,"span",[["class","fa fa-chevron-down date-dropdown-icon"]],null,null,null,null,null))],null,function(e,t){e(t,0,0,l.pb(t,0,0,l.gb(t,1).transform(t.context.$implicit)))})}function A(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,19,"kendo-calendar",[["class","calendar-tree-view"],["style","height: calc(100% - 2px); width: calc(100% - 2px); overflow: hidden; border:none;"],["tiKendoCalendarHeaderTemplate",""]],[[1,"id",0],[1,"role",0],[1,"tabindex",0],[1,"aria-disabled",0],[2,"k-state-disabled",null],[1,"aria-activedescendant",0]],[[null,"valueChange"]],function(e,t,n){var l=!0;return"valueChange"===t&&(l=!1!==(e.component.calendarYearValue=n)&&l),l},i.f,i.a)),l.lb(5120,null,o.n,function(e){return[e]},[d.a]),l.lb(5120,null,o.m,function(e){return[e]},[d.a]),l.lb(135680,null,h.b,h.b,[h.a,[2,b.a],[2,k.a]]),l.lb(512,null,f.a,f.a,[l.s]),l.lb(512,null,p.a,p.a,[f.a]),l.lb(512,null,r.a,r.a,[m.a,l.B]),l.Va(7,9158656,[[2,4],["yearCalendar",4]],8,d.a,[f.a,m.a,l.l,p.a,l.H,l.i,l.B,l.s,r.a,[2,u.a]],{value:[0,"value"],navigation:[1,"navigation"],activeView:[2,"activeView"],bottomView:[3,"bottomView"]},{valueChange:"valueChange"}),l.mb(335544320,16,{cellTemplate:0}),l.mb(335544320,17,{monthCellTemplate:0}),l.mb(335544320,18,{yearCellTemplate:0}),l.mb(335544320,19,{decadeCellTemplate:0}),l.mb(335544320,20,{centuryCellTemplate:0}),l.mb(335544320,21,{weekNumberTemplate:0}),l.mb(335544320,22,{headerTitleTemplate:0}),l.mb(335544320,23,{navigationItemTemplate:0}),l.Va(16,212992,null,0,v,[d.a],null,null),l.lb(256,null,h.a,"kendo.calendar",[]),(e()(),l.Na(0,null,null,1,null,W)),l.Va(19,16384,[[22,4]],0,c.a,[l.Q],null,null)],function(e,t){e(t,7,0,t.component.calendarYearValue,!1,"year","year"),e(t,16,0)},function(e,t){e(t,0,0,l.gb(t,7).widgetId,l.gb(t,7).widgetRole,l.gb(t,7).calendarTabIndex,l.gb(t,7).ariaDisabled,l.gb(t,7).ariaDisabled,l.gb(t,7).ariaActivedescendant)})}function G(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,2,"div",[["class","calendar-tree-view-container"]],null,null,null,null,null)),(e()(),l.Na(16777216,null,null,1,null,A)),l.Va(2,16384,null,0,T.m,[l.T,l.Q],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,2,0,t.component.showYearCalendar)},null)}function B(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,1,"span",[["class","tab-title"]],null,null,null,null,null)),(e()(),l.ob(-1,null,["Range"]))],null,null)}function L(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,36,"div",[["class","calendar-tree-view-container k-form"]],null,null,null,null,null)),(e()(),l.Wa(1,0,null,null,17,"div",[["class","field"]],null,null,null,null,null)),(e()(),l.Wa(2,0,null,null,1,"label",[["for","start-date"]],null,null,null,null,null)),(e()(),l.ob(-1,null,["Start Date"])),(e()(),l.Wa(4,0,null,null,14,"kendo-datepicker",[["id","start-date"],["placeholder"," "],["tiClearInputButton",""]],[[2,"k-widget",null],[2,"k-datepicker",null],[2,"k-header",null],[2,"k-state-disabled",null]],[[null,"valueChange"]],function(e,t,n){var l=!0;return"valueChange"===t&&(l=!1!==(e.component.startDate=n)&&l),l},i.h,i.c)),l.lb(5120,null,o.n,function(e){return[e]},[s.a]),l.lb(5120,null,o.m,function(e){return[e]},[s.a]),l.lb(256,null,h.a,"kendo.datepicker",[]),l.lb(131584,null,h.b,h.b,[h.a,[2,b.a],[2,k.a]]),l.lb(512,null,u.a,u.a,[]),l.Va(10,770048,null,8,s.a,[l.B,h.b,l.i,y.b,l.l,l.H,l.s,u.a,[2,g.a]],{value:[0,"value"],format:[1,"format"],placeholder:[2,"placeholder"]},{valueChange:"valueChange"}),l.mb(335544320,26,{cellTemplate:0}),l.mb(335544320,27,{monthCellTemplate:0}),l.mb(335544320,28,{yearCellTemplate:0}),l.mb(335544320,29,{decadeCellTemplate:0}),l.mb(335544320,30,{centuryCellTemplate:0}),l.mb(335544320,31,{weekNumberTemplate:0}),l.mb(335544320,32,{headerTitleTemplate:0}),l.mb(335544320,33,{navigationItemTemplate:0}),(e()(),l.Wa(19,0,null,null,17,"div",[["class","field"]],null,null,null,null,null)),(e()(),l.Wa(20,0,null,null,1,"label",[["for","due-date"]],null,null,null,null,null)),(e()(),l.ob(-1,null,["Due Date"])),(e()(),l.Wa(22,0,null,null,14,"kendo-datepicker",[["id","due-date"],["placeholder"," "],["tiClearInputButton",""]],[[2,"k-widget",null],[2,"k-datepicker",null],[2,"k-header",null],[2,"k-state-disabled",null]],[[null,"valueChange"]],function(e,t,n){var l=!0;return"valueChange"===t&&(l=!1!==(e.component.dueDate=n)&&l),l},i.h,i.c)),l.lb(5120,null,o.n,function(e){return[e]},[s.a]),l.lb(5120,null,o.m,function(e){return[e]},[s.a]),l.lb(256,null,h.a,"kendo.datepicker",[]),l.lb(131584,null,h.b,h.b,[h.a,[2,b.a],[2,k.a]]),l.lb(512,null,u.a,u.a,[]),l.Va(28,770048,null,8,s.a,[l.B,h.b,l.i,y.b,l.l,l.H,l.s,u.a,[2,g.a]],{value:[0,"value"],format:[1,"format"],placeholder:[2,"placeholder"]},{valueChange:"valueChange"}),l.mb(335544320,34,{cellTemplate:0}),l.mb(335544320,35,{monthCellTemplate:0}),l.mb(335544320,36,{yearCellTemplate:0}),l.mb(335544320,37,{decadeCellTemplate:0}),l.mb(335544320,38,{centuryCellTemplate:0}),l.mb(335544320,39,{weekNumberTemplate:0}),l.mb(335544320,40,{headerTitleTemplate:0}),l.mb(335544320,41,{navigationItemTemplate:0})],function(e,t){var n=t.component;e(t,10,0,n.startDate,"dd MMM yyyy"," "),e(t,28,0,n.dueDate,"dd MMM yyyy"," ")},function(e,t){e(t,4,0,l.gb(t,10).wrapperClasses,l.gb(t,10).wrapperClasses,l.gb(t,10).wrapperClasses,l.gb(t,10).disabledClass),e(t,22,0,l.gb(t,28).wrapperClasses,l.gb(t,28).wrapperClasses,l.gb(t,28).wrapperClasses,l.gb(t,28).disabledClass)})}function H(e){return l.qb(0,[l.mb(671088640,1,{monthCalendar:0}),l.mb(671088640,2,{yearCalendar:0}),(e()(),l.Wa(2,0,null,null,28,"kendo-tabstrip",[["class","calendar-tree-tabs h-100"]],[[2,"k-widget",null],[2,"k-tabstrip",null],[2,"k-floatwrap",null],[2,"k-header",null],[2,"k-tabstrip-top",null],[2,"k-tabstrip-right",null],[2,"k-tabstrip-bottom",null],[2,"k-tabstrip-left",null],[1,"dir",0]],[[null,"tabSelect"]],function(e,t,n){var l=!0;return"tabSelect"===t&&(l=!1!==e.component.onTabSelect(n)&&l),l},C.b,C.a)),l.lb(256,null,h.a,"kendo.tabstrip",[]),l.lb(131584,null,h.b,h.b,[h.a,[2,b.a],[2,k.a]]),l.Va(5,245760,null,1,F.a,[h.b,l.H,l.l],{keepTabContent:[0,"keepTabContent"]},{tabSelect:"tabSelect"}),l.mb(603979776,3,{tabs:1}),(e()(),l.Wa(7,0,null,null,7,"kendo-tabstrip-tab",[["class","calendar-tabstrip"]],null,null,null,S.b,S.a)),l.Va(8,1622016,[[3,4]],2,w.a,[],{selected:[0,"selected"]},null),l.mb(603979776,4,{_tabContent:1}),l.mb(335544320,5,{tabTitle:0}),(e()(),l.Na(0,null,null,1,null,N)),l.Va(12,16384,[[5,4]],0,I.a,[l.Q],null,null),(e()(),l.Na(0,null,null,1,null,M)),l.Va(14,16384,[[4,4]],0,x.a,[l.Q],null,null),(e()(),l.Wa(15,0,null,null,7,"kendo-tabstrip-tab",[["class","calendar-tabstrip"]],null,null,null,S.b,S.a)),l.Va(16,1622016,[[3,4]],2,w.a,[],null,null),l.mb(603979776,14,{_tabContent:1}),l.mb(335544320,15,{tabTitle:0}),(e()(),l.Na(0,null,null,1,null,R)),l.Va(20,16384,[[15,4]],0,I.a,[l.Q],null,null),(e()(),l.Na(0,null,null,1,null,G)),l.Va(22,16384,[[14,4]],0,x.a,[l.Q],null,null),(e()(),l.Wa(23,0,null,null,7,"kendo-tabstrip-tab",[["class","calendar-tabstrip"]],null,null,null,S.b,S.a)),l.Va(24,1622016,[[3,4]],2,w.a,[],null,null),l.mb(603979776,24,{_tabContent:1}),l.mb(335544320,25,{tabTitle:0}),(e()(),l.Na(0,null,null,1,null,B)),l.Va(28,16384,[[25,4]],0,I.a,[l.Q],null,null),(e()(),l.Na(0,null,null,1,null,L)),l.Va(30,16384,[[24,4]],0,x.a,[l.Q],null,null),(e()(),l.Wa(31,0,null,null,2,"button",[["class","k-button k-primary clear-all-btn"],["kendobutton",""]],null,[[null,"click"]],function(e,t,n){var l=!0;return"click"===t&&(l=!1!==e.component.clearDateFilter()&&l),l},null,null)),(e()(),l.ob(32,null,["",""])),l.ib(131072,a.i,[a.j,l.i])],function(e,t){e(t,5,0,t.component.keepContent),e(t,8,0,!0)},function(e,t){e(t,2,0,l.gb(t,5).hostClasses,l.gb(t,5).hostClasses,l.gb(t,5).hostClasses,l.gb(t,5).hostClasses,l.gb(t,5).tabsAtTop,l.gb(t,5).tabsAtRight,l.gb(t,5).tabsAtBottom,l.gb(t,5).tabsAtLeft,l.gb(t,5).dir),e(t,32,0,l.pb(t,32,0,l.gb(t,33).transform("clearAll")))})}var _=l.Sa("ti-task-calendar",V,function(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,1,"ti-task-calendar",[],null,null,null,H,D)),l.Va(1,4308992,null,0,V,[],null,null)],function(e,t){e(t,1,0)},null)},{},{},[])},l33T:function(e,t,n){"use strict";var l=n("CcnG"),a=n("7+zM"),i=n("OHd8"),o=n("2R3+"),r=n("dfm8"),s=n("ntmm"),u=n("g4Ue"),c=n("PoBK"),d=n("3abG"),p=n("r4+f"),m=n("YyjN"),f=n("mhJm"),g=n("r9sr"),h=n("o3mN"),b=n("u3HK"),k=n("e2Dx"),v=n("UrX+"),T=n("8tIk"),y=n("Ip0R"),C=n("r/4F");n.d(t,"a",function(){return I});var F=l.Ua({encapsulation:0,styles:[[".dialog-content[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0 30px 15px;border-top:1px solid #d7dde0}kendo-popup.k-animation-container-fixed[_ngcontent-%COMP%]{left:0;top:0;width:100%;height:100%}kendo-popup.k-animation-container-fixed[_ngcontent-%COMP%]   .k-popup[_ngcontent-%COMP%]{height:100%;width:100%;background:0 0}kendo-popup.k-animation-container-fixed[_ngcontent-%COMP%]   .k-popup[_ngcontent-%COMP%]   ti-task-manager[_ngcontent-%COMP%]{height:100%;width:100%}.form-collapsed[_ngcontent-%COMP%]{height:0!important}.task-menu[_ngcontent-%COMP%]{min-height:595px}.task-menu[_ngcontent-%COMP%]   .k-radio-label[_ngcontent-%COMP%]{margin-right:0;padding-left:1rem}.task-menu[_ngcontent-%COMP%]   .menu-contexts[_ngcontent-%COMP%]{margin-bottom:0!important;display:flex;justify-content:space-between;flex-wrap:wrap}.task-menu[_ngcontent-%COMP%]   .menu-contexts[_ngcontent-%COMP%]   ti-task-form[_ngcontent-%COMP%]{height:500px;width:100%;overflow:auto}.task-menu[_ngcontent-%COMP%]   .button-controls[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function S(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l.Wa(1,0,null,null,0,"span",[["class","k-i-loading-wrapper"],["style","position: absolute;\n      top: 0;\n      bottom: 0;\n      right: 0;\n      left: 0;\n      z-index: 99998;"]],null,null,null,null,null)),(e()(),l.Wa(2,0,null,null,0,"span",[["class","k-icon k-i-loading"],["style","position: absolute;\n      left: calc(50% - 32px);\n      right: 0;\n      bottom: calc(50% - 32px);\n      font-size: 64px;\n      z-index: 99999;"]],null,null,null,null,null))],null,null)}function w(e){return l.qb(0,[l.mb(402653184,1,{taskForm:0}),(e()(),l.Wa(1,0,null,null,27,"kendo-dialog",[["class","k-form task-menu"]],[[1,"dir",0],[1,"tabIndex",0],[2,"k-dialog-wrapper",null]],[[null,"close"],[null,"keydown"]],function(e,t,n){var a=!0,i=e.component;return"keydown"===t&&(a=!1!==l.gb(e,4).onComponentKeydown(n)&&a),"close"===t&&(a=!1!==i.onClose()&&a),a},a.g,a.d)),l.lb(256,null,i.a,"kendo.dialog",[]),l.lb(131584,null,i.b,i.b,[i.a,[2,o.a],[2,r.a]]),l.Va(4,5488640,[["dialog",4]],1,c.a,[l.l,l.H,i.b],{width:[0,"width"],minWidth:[1,"minWidth"],height:[2,"height"]},{close:"close"}),l.mb(335544320,2,{titlebarContent:0}),(e()(),l.Wa(6,0,null,0,7,"kendo-dialog-titlebar",[],[[8,"id",0],[2,"k-window-titlebar",null],[2,"k-dialog-titlebar",null],[2,"k-header",null]],null,null,a.h,a.e)),l.Va(7,49152,[[2,4]],0,u.a,[],null,null),(e()(),l.Wa(8,0,null,0,1,"span",[],null,null,null,null,null)),(e()(),l.ob(9,null,["",""])),(e()(),l.Wa(10,0,null,0,3,"button",[["class","card-help no-text"],["kendoButton",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0]],[[null,"click"]],function(e,t,n){var a=!0;return"click"===t&&(a=!1!==l.gb(e,13).onClick()&&a),a},null,null)),l.lb(256,null,i.a,"kendo.button",[]),l.lb(131584,null,i.b,i.b,[i.a,[2,o.a],[2,r.a]]),l.Va(13,9125888,null,0,d.a,[l.l,l.H,[2,p.a],i.b,l.B],{look:[0,"look"],iconClass:[1,"iconClass"]},null),(e()(),l.Wa(14,0,null,1,2,"div",[["class","menu-contexts k-form-field"]],null,null,null,null,null)),(e()(),l.Wa(15,0,null,null,1,"ti-task-form",[],null,[[null,"formLoading"],[null,"onResult"]],function(e,t,n){var l=!0,a=e.component;return"formLoading"===t&&(l=!1!==a.onChangeLoadingStatus(n)&&l),"onResult"===t&&(l=!1!==a.onFormResult(n)&&l),l},m.b,m.a)),l.Va(16,4440064,[[1,4],["taskForm",4]],0,f.a,[g.a,h.a,b.a,k.a,v.a,T.a,l.i],{task:[0,"task"],formConfig:[1,"formConfig"],siteId:[2,"siteId"],adminOrHigher:[3,"adminOrHigher"]},{formLoading:"formLoading",onResult:"onResult"}),(e()(),l.Wa(17,0,null,2,11,"kendo-dialog-actions",[],[[2,"k-button-group",null],[2,"k-dialog-buttongroup",null],[2,"k-dialog-button-layout-stretched",null]],null,null,a.f,a.c)),l.Va(18,49152,null,0,s.a,[l.l],null,null),(e()(),l.Wa(19,0,null,0,4,"button",[["kendoButton",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0]],[[null,"click"]],function(e,t,n){var a=!0,i=e.component;return"click"===t&&(a=!1!==l.gb(e,22).onClick()&&a),"click"===t&&(a=!1!==i.onClose()&&a),a},null,null)),l.lb(256,null,i.a,"kendo.button",[]),l.lb(131584,null,i.b,i.b,[i.a,[2,o.a],[2,r.a]]),l.Va(22,9125888,null,0,d.a,[l.l,l.H,[2,p.a],i.b,l.B],null,null),(e()(),l.ob(23,null,["",""])),(e()(),l.Wa(24,0,null,0,4,"button",[["kendoButton",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0]],[[null,"click"]],function(e,t,n){var a=!0,i=e.component;return"click"===t&&(a=!1!==l.gb(e,27).onClick()&&a),"click"===t&&(a=!1!==i.onSave()&&a),a},null,null)),l.lb(256,null,i.a,"kendo.button",[]),l.lb(131584,null,i.b,i.b,[i.a,[2,o.a],[2,r.a]]),l.Va(27,9125888,null,0,d.a,[l.l,l.H,[2,p.a],i.b,l.B],{primary:[0,"primary"],disabled:[1,"disabled"]},null),(e()(),l.ob(28,null,["",""])),(e()(),l.Na(16777216,null,null,1,null,S)),l.Va(30,16384,null,0,y.m,[l.T,l.Q],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,4,0,580,"auto","100%"),e(t,13,0,"flat","fa fa-question"),e(t,16,0,n.task,n.formConfig,n.siteId,n.adminOrHigher),e(t,22,0),e(t,27,0,!0,!n.isFormValid),e(t,30,0,n.isLoading)},function(e,t){var n=t.component;e(t,1,0,l.gb(t,4).dir,l.gb(t,4).tabIndex,l.gb(t,4).wrapperClass),e(t,6,0,l.gb(t,7).id,l.gb(t,7).className,l.gb(t,7).className,l.gb(t,7).className),e(t,9,0,n.dialogTitle),e(t,10,0,l.gb(t,13).classButton,l.gb(t,13).classDisabled,l.gb(t,13).classPrimary,l.gb(t,13).isFlat,l.gb(t,13).isBare,l.gb(t,13).isOutline,l.gb(t,13).classActive,l.gb(t,13).dir),e(t,17,0,l.gb(t,18).className,l.gb(t,18).className,l.gb(t,18).className),e(t,19,0,l.gb(t,22).classButton,l.gb(t,22).classDisabled,l.gb(t,22).classPrimary,l.gb(t,22).isFlat,l.gb(t,22).isBare,l.gb(t,22).isOutline,l.gb(t,22).classActive,l.gb(t,22).dir),e(t,23,0,n.miscStrings.cancel),e(t,24,0,l.gb(t,27).classButton,l.gb(t,27).classDisabled,l.gb(t,27).classPrimary,l.gb(t,27).isFlat,l.gb(t,27).isBare,l.gb(t,27).isOutline,l.gb(t,27).classActive,l.gb(t,27).dir),e(t,28,0,n.miscStrings.save)})}var I=l.Sa("ti-task-manager",C.a,function(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,1,"ti-task-manager",[],null,null,null,w,F)),l.Va(1,376832,null,0,C.a,[],null,null)],function(e,t){e(t,1,0)},null)},{task:"task",formConfig:"formConfig",siteId:"siteId",adminOrHigher:"adminOrHigher"},{},[])},mhJm:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var l=n("CcnG"),a=n("wd/R"),i=(n("8tIk"),n("u3HK"),n("pTjd")),o=(n("YuQZ"),n("e2Dx"),n("dgYu")),r=n("C7+f"),s=(n("biCy"),n("o3mN"),n("SVYi")),u=(n("UrX+"),n("r9sr"),function(){function e(e,t,n,a,i,o,r){this.taskFieldsService=e,this.sessionService=t,this.calendarTaskService=n,this.taskDynamicFieldsService=a,this.taskFormService=i,this.notificationService=o,this.cd=r,this.formLoading=new l.n,this.onResult=new l.n,this.deletedAttachments=[],this.newAttachments=[],this.visible=!1,this.fields=null,this.initialFieldValues=null,this.strings=tiStrings.tiComponents.tasks.taskForm}return e.prototype.ngOnInit=function(){this.taskFormService.siteId=this.siteId?this.siteId:this.sessionService.currentRoomId,this.taskFormService.adminOrHigher=void 0!==this.adminOrHigher?this.adminOrHigher:this.sessionService.user.adminOrHigher,this.taskDynamicFieldsService.createMode=!this.task,this.attachmentFieldConfig=this.taskFieldsService.attachmentFieldConfig},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.refresh()})},e.prototype.refresh=function(){this.loadData(),this.generateEditHistory()},e.prototype.updateFieldValues=function(){this.dynamicForm&&this.dynamicForm.formGroup&&this.dynamicForm.formGroup.value&&(this.task?this.editTask():this.createTask())},e.prototype.editTask=function(){var e=this,t={Attachments:this.newAttachments.concat(this.deletedAttachments),ParentId:this.task.ParentId,SiteId:this.task.SiteId,TopicFields:this._getFields(),TopicId:this.task.TopicId,TopicName:this.task.TopicName,TopicTypeId:this.task.TopicTypeId};this.cleanUpTaskFields(t),this.convertFields(t);var n={task:t};this.formLoading.next(!0),this.calendarTaskService.modifyCalendarTask(n).subscribe(function(t){0===t.ErrorCode&&e.notificationService.showSuccess(e.strings.editTaskSuccessMessage,e.strings.editTaskSuccessSource),e.formLoading.next(!1),e.onResult.next(t.Result)})},e.prototype.createTask=function(){var e=this,t={SiteId:this.taskFormService.siteId,TopicTypeId:this.sessionService.topicTypes.getIds([i.b.CalendarTask])[0],TopicName:(new Date).getTime(),ParentId:null,TopicFields:this._getFields(),Attachments:this.newAttachments};this.cleanUpTaskFields(t),this.convertFields(t);var n={task:t};this.formLoading.next(!0),this.calendarTaskService.createCalendarTasks(n).subscribe(function(t){0===t.ErrorCode&&e.notificationService.showSuccess(e.strings.createTaskSuccessMessage,e.strings.createTaskSuccessSource),e.formLoading.next(!1),e.onResult.next(t.Result)})},e.prototype._getFields=function(){var e=this,t=[];if(this.formConfig&&this.formConfig.formFields){var n={};for(var l in this.dynamicForm.formGroup.controls)this.dynamicForm.formGroup.controls.hasOwnProperty(l)&&(n[l]=this.dynamicForm.formGroup.controls[l].value);if(this.formConfig&&this.formConfig.formFields)return this.formConfig.formFields.forEach(function(l){t.push({FieldName:l.fieldName,Fieldvalue:e.isControlValid(l.fieldName)?n[l.fieldName]:e.getDefaultValue(l.fieldName),FieldType:l.fieldType})}),t}return[]},e.prototype.getDefaultValue=function(e){switch(e){case s.a.Tasks.SiteId:return this.taskFormService.siteId;default:return null}},e.prototype.isControlValid=function(e){return!!(this.dynamicForm&&this.dynamicForm.formGroup&&this.dynamicForm.formGroup.controls&&this.dynamicForm.formGroup.controls[e])&&!this.dynamicForm.formGroup.controls[e].invalid},e.prototype.cleanUpTaskFields=function(e){var t=[s.a.Tasks.Owner,s.a.Tasks.Assign,s.a.Tasks.IsReminderSent];this.sessionService.user.adminOrHigher||t.push.apply(t,[s.a.Tasks.CreatedDate,s.a.Tasks.LastUpdatedBy,s.a.Tasks.LastUpdatedDate]),e.TopicFields=e.TopicFields.filter(function(e){return-1===t.indexOf(e.FieldName)})},e.prototype.convertFields=function(e){e.TopicFields.forEach(function(e){switch(e.FieldType===r.a.KeywordLookup&&(e.FieldType=r.a.Text),e.FieldType){case r.a.Text:case r.a.LongText:e.Fieldvalue=e.Fieldvalue?String(e.Fieldvalue):"";break;case r.a.Number:if(e.Fieldvalue||0===e.Fieldvalue){var t=Number(e.Fieldvalue);e.Fieldvalue=isNaN(t)?"":t}else e.Fieldvalue="";break;case r.a.Boolean:e.Fieldvalue=Number(e.Fieldvalue);break;case r.a.Date:e.FieldName!==s.a.Tasks.Reminder&&(e.Fieldvalue=e.Fieldvalue instanceof Date?a(e.Fieldvalue).format("MM/DD/YYYY"):"")}})},e.prototype.loadData=function(){var e=this;this.formLoading.next(!0),this.sub=this.sessionService.forms.getForm(i.b.CalendarTask,this.taskFormService.siteId).subscribe(function(t){e.formConfig=o.a.convertFormToFormConfig(t),e.taskDynamicFieldsService.customizeFormConfig(e.formConfig).subscribe(function(){e.task?(e.taskFieldsService.getEntityConfig({topic:e.task,attachments:e.task.Attachments,siteId:e.taskFormService.siteId}).subscribe(function(t){e.initialFieldValues=t.fields,e.formData=t,e.cd.detectChanges(),e.formLoading.next(!1)}),e.attachments=e.task.Attachments):(e.formData={form:null,fields:e.taskDynamicFieldsService.generateDefaultTaskFields()},e.attachments=[],e.formLoading.next(!1)),e.visible=!0})})},e.prototype.generateEditHistory=function(){this.editHistory=this.task?{createdBy:o.a.getTopicFieldValue(this.task.TopicFields,s.a.Tasks.Owner),createdDate:o.a.getTopicFieldValue(this.task.TopicFields,s.a.Tasks.CreatedDate),updatedBy:o.a.getTopicFieldValue(this.task.TopicFields,s.a.Tasks.LastUpdatedBy),updatedDate:o.a.getTopicFieldValue(this.task.TopicFields,s.a.Tasks.LastUpdatedDate)}:null},e.prototype.addAttachment=function(e){this.newAttachments.push({FileName:e.FileName,FileToken:e.FileToken})},e.prototype.deleteAttachment=function(e){if(e.FileToken){var t=this.newAttachments.findIndex(function(t){return t.FileToken===e.FileToken});-1!==t&&this.newAttachments.splice(t,1)}else e.FileId&&this.deletedAttachments.push(e)},e.prototype.ngOnDestroy=function(){this.sub&&this.sub.unsubscribe()},e}())},ofia:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var l=n("r/4F"),a=(n("8tIk"),n("o3mN"),n("u3HK"),n("/Wbt")),i=n("SXCS"),o=(n("jU+G"),function(){function e(e,t,n,l){this.dialogService=e,this.sessionService=t,this.calendarTaskService=n,this.notificationsService=l,this.strings=tiStrings.tiComponents.tasks.services.taskActionsService}return e.prototype.getContextMenuActions=function(e,t){return[this.getCreateTaskAction(),this.getEditTaskAction(),this.getDeleteTaskAction(),this.getExportAction()]},e.prototype.getCreateTaskAction=function(e,t){return{icon:"fa fa-plus-circle",text:this.strings.add,dialogComponent:l.a,resultReceiver:e,dialogInitializer:function(e,t,n){e.close$.subscribe(function(e){n({cancel:!e,close:!0})})}}},e.prototype.getEditTaskAction=function(e,t){return{icon:"fa fa-pencil",text:this.strings.edit,disabled:!0,dialogComponent:l.a,resultReceiver:e,updater:function(e,t){e.disabled=1!==t.gridItemsSelected.length},dialogInitializer:function(e,t,n){e.task=t.gridItemsSelected[0],e.close$.subscribe(function(e){return n({cancel:!e,close:!0})})}}},e.prototype.getDeleteTaskAction=function(e,t){var n=this;return{icon:"fa fa-times icon-delete",text:this.strings.delete,disabled:!0,handler:function(e){return new Promise(function(t){n.dialogService.askQuestion(n.strings.deleteQuestionTitle,n.strings.deleteQuestionText).then(function(l){"yes"===l?n.calendarTaskService.deleteCalendarTask({siteId:n.sessionService.currentRoomId,taskTopics:e.gridItemsSelected}).subscribe(function(e){t({cancel:!1}),0===e.ErrorCode&&n.notificationsService.showSuccess(n.strings.deleteSuccessMessage,n.strings.deleteSuccessSource)}):t({cancel:!0})})})},resultReceiver:e,updater:function(e,t){e.disabled=!t.gridItemsSelected.length}}},e.prototype.getExportAction=function(e,t){return{icon:"fa fa-arrow-down",text:this.strings.export,dialogComponent:i.a,resultReceiver:e,disabled:!0,updater:function(e,t){e.disabled=!t.viewSelectorState.selectedNodes.length},dialogInitializer:function(e,t,n){e.config={exportType:a.a.CalendarTasks},e.close$.subscribe(function(e){return n({cancel:!1,close:!0})}),e.topics=t.gridItemsSelected}}},e.prototype.getSaveAction=function(e,t){return{icon:"fa fa-floppy-o",text:"Save",handler:function(e){return new Promise(function(t){t({data:e,cancel:!1})})},resultReceiver:e}},e.prototype.getCancelAction=function(e,t){return{icon:"fa fa-ban",text:"Cancel",handler:function(e){return new Promise(function(e){e({cancel:!1})})},resultReceiver:e}},e}())},pDRj:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var l=n("mrSG"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(l.c)(t,e),Object.defineProperty(t.prototype,"priority",{set:function(e){if(e){var n=t.getPriorities();this.text=n[e].text,this.backgroundColor=n[e].backgroundColor}},enumerable:!0,configurable:!0}),t.createPriorety=function(e,t){return{text:e,backgroundColor:t}},t.getPriorities=function(){if(this.prioreties)return this.prioreties;var e={};return e[1]=this.createPriorety("Low","#FFFA93"),e[2]=this.createPriorety("Normal","#FFBF55"),e[3]=this.createPriorety("High","#FF7889"),e},t}(n("DCLU").a)},"r/4F":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var l=n("CcnG"),a=(n("YuQZ"),n("mhJm"),function(){function e(){this.close$=new l.n,this.isSaveClicked=!1,this.isFormValid=!1,this.strings=tiStrings.tiComponents.tasks.taskManager,this.miscStrings=tiStrings.app.misc}return e.prototype.ngOnInit=function(){this.dialogTitle=this.task?this.strings.editTask:this.strings.createTask},e.prototype.ngDoCheck=function(){this.isFormValid=this.taskForm&&this.taskForm.dynamicForm&&this.taskForm.dynamicForm.formGroup&&this.taskForm.dynamicForm.formGroup.valid},e.prototype.onClose=function(e){this.close$.emit(e)},e.prototype.onSave=function(){this.isSaveClicked=!0,this.taskForm.updateFieldValues()},e.prototype.onChangeLoadingStatus=function(e){this.isLoading=e},e.prototype.onFormResult=function(e){this.onClose(e)},e}())},r9sr:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var l=n("mrSG"),a=n("rV5w"),i=n("SVYi"),o=n("YuQZ"),r=n("C7+f"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.attachmentFieldConfig={fieldName:i.a.Tasks.Attachments,fieldTitle:i.a.Tasks.Attachments},t}return Object(l.c)(t,e),t.prototype.requestData=function(e){return new a.b(function(t){return t.next(e)})},t.prototype.convertResponseToFields=function(e){var t=e.topic,n=e.attachments||[];if(!t)return[];for(var l=[o.a.create("TopicId","Topic Id",t.TopicId,r.a.Text),o.a.create("TopicName","Topic Name",t.TopicName,r.a.Number),o.a.create("Attachments","Attachments",n,r.a.Number)],a=0;a<l.length;a++){var i=t.TopicFields[a];i&&l.push(o.a.create(i.FieldName,i.FieldName,i.Fieldvalue,i.FieldType))}return l},t}(o.b)},tq3R:function(e,t,n){"use strict";var l=n("CcnG"),a=n("dHVX"),i=n("jU+G"),o=n("bMLP"),r=n("dfm8"),s=n("2R3+"),u=n("OHd8"),c=n("r4+f"),d=n("3abG"),p=n("YyjN"),m=n("mhJm"),f=n("r9sr"),g=n("o3mN"),h=n("u3HK"),b=n("e2Dx"),k=n("UrX+"),v=n("8tIk"),T=n("Ip0R"),y=n("6QGf");n.d(t,"a",function(){return V});var C=l.Ua({encapsulation:0,styles:[["ti-task-form[_ngcontent-%COMP%]{display:block;height:calc(100% - 57px);overflow:auto}.simple-coding[_ngcontent-%COMP%], ti-toolbar[_ngcontent-%COMP%]{position:relative;display:block}.simple-coding[_ngcontent-%COMP%]{height:100%}.simple-coding.with-actions[_ngcontent-%COMP%]{height:calc(100% - 3rem)}ti-toolbar[_ngcontent-%COMP%]{height:3rem;border-top:1px solid #e6e6e6;box-sizing:border-box}.task-coding-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:15px;border-top:2px solid #d6d6d6}.task-coding-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{margin-right:15px}"]],data:{}});function F(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,2,"ti-toolbar",[],null,null,null,a.c,a.a)),l.lb(131584,null,i.a,i.a,[l.k,l.g,l.s]),l.Va(2,4243456,null,0,o.a,[i.a,l.i],{actions:[0,"actions"]},null)],function(e,t){e(t,2,0,t.component.actions)},null)}function S(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,10,"div",[["class","task-coding-actions"]],null,null,null,null,null)),(e()(),l.Wa(1,0,null,null,4,"button",[["kendoButton",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0]],[[null,"click"]],function(e,t,n){var a=!0,i=e.component;return"click"===t&&(a=!1!==l.gb(e,4).onClick()&&a),"click"===t&&(a=!1!==i.cancel()&&a),a},null,null)),l.lb(256,null,u.a,"kendo.button",[]),l.lb(131584,null,u.b,u.b,[u.a,[2,s.a],[2,r.a]]),l.Va(4,9125888,null,0,d.a,[l.l,l.H,[2,c.a],u.b,l.B],null,null),(e()(),l.ob(5,null,["",""])),(e()(),l.Wa(6,0,null,null,4,"button",[["kendoButton",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0]],[[null,"click"]],function(e,t,n){var a=!0,i=e.component;return"click"===t&&(a=!1!==l.gb(e,9).onClick()&&a),"click"===t&&(a=!1!==i.save()&&a),a},null,null)),l.lb(256,null,u.a,"kendo.button",[]),l.lb(131584,null,u.b,u.b,[u.a,[2,s.a],[2,r.a]]),l.Va(9,9125888,null,0,d.a,[l.l,l.H,[2,c.a],u.b,l.B],{primary:[0,"primary"],disabled:[1,"disabled"]},null),(e()(),l.ob(10,null,["",""]))],function(e,t){var n=t.component;e(t,4,0),e(t,9,0,!0,!n.isFormValid)},function(e,t){var n=t.component;e(t,1,0,l.gb(t,4).classButton,l.gb(t,4).classDisabled,l.gb(t,4).classPrimary,l.gb(t,4).isFlat,l.gb(t,4).isBare,l.gb(t,4).isOutline,l.gb(t,4).classActive,l.gb(t,4).dir),e(t,5,0,n.strings.cancel),e(t,6,0,l.gb(t,9).classButton,l.gb(t,9).classDisabled,l.gb(t,9).classPrimary,l.gb(t,9).isFlat,l.gb(t,9).isBare,l.gb(t,9).isOutline,l.gb(t,9).classActive,l.gb(t,9).dir),e(t,10,0,n.strings.save)})}function w(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,6,null,null,null,null,null,null,null)),(e()(),l.Wa(1,0,null,null,1,"ti-task-form",[],null,[[null,"formLoading"],[null,"onResult"]],function(e,t,n){var l=!0,a=e.component;return"formLoading"===t&&(l=!1!==a.onChangeLoadingStatus(n)&&l),"onResult"===t&&(l=!1!==a.onFormResult(n)&&l),l},p.b,p.a)),l.Va(2,4440064,[[1,4],["taskForm",4]],0,m.a,[f.a,g.a,h.a,b.a,k.a,v.a,l.i],{task:[0,"task"],formConfig:[1,"formConfig"]},{formLoading:"formLoading",onResult:"onResult"}),(e()(),l.Na(16777216,null,null,1,null,F)),l.Va(4,16384,null,0,T.m,[l.T,l.Q],{ngIf:[0,"ngIf"]},null),(e()(),l.Na(16777216,null,null,1,null,S)),l.Va(6,16384,null,0,T.m,[l.T,l.Q],{ngIf:[0,"ngIf"]},null),(e()(),l.Na(0,null,null,0))],function(e,t){var n=t.component;e(t,2,0,n.task,n.formConfig),e(t,4,0,n.actions),e(t,6,0,l.gb(t,2).formData)},null)}function I(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),l.Wa(1,0,null,null,0,"span",[["class","k-i-loading-wrapper"],["style","position: absolute;\n            top: 0;\n            bottom: 0;\n            right: 0;\n            left: 0;\n            z-index: 99998;"]],null,null,null,null,null)),(e()(),l.Wa(2,0,null,null,0,"span",[["class","k-icon k-i-loading"],["style","position: absolute;\n            left: calc(50% - 32px);\n            bottom: calc(50% - 32px);\n            font-size: 64px;\n            z-index: 9999;"]],null,null,null,null,null))],null,null)}function x(e){return l.qb(2,[l.mb(671088640,1,{taskForm:0}),(e()(),l.Na(16777216,null,null,1,null,w)),l.Va(2,16384,null,0,T.m,[l.T,l.Q],{ngIf:[0,"ngIf"]},null),(e()(),l.Na(16777216,null,null,1,null,I)),l.Va(4,16384,null,0,T.m,[l.T,l.Q],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,2,0,n.task),e(t,4,0,n.isLoading)},null)}var V=l.Sa("ti-task-coding",y.a,function(e){return l.qb(0,[(e()(),l.Wa(0,0,null,null,1,"ti-task-coding",[],null,null,null,x,C)),l.Va(1,311296,null,0,y.a,[l.i],null,null)],function(e,t){e(t,1,0)},null)},{},{},[])},vJjD:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var l=n("mrSG"),a=n("DCLU"),i=(n("o3mN"),n("pTjd")),o=n("dgYu"),r=(n("h4+K"),function(e){function t(t,n,l){var a=e.call(this)||this;return a.cd=t,a.sessionService=n,a.topicSearchService=l,a}return Object(l.c)(t,e),Object.defineProperty(t.prototype,"status",{set:function(e){var t=this;e?(this.isNullValue=!1,this.getStatuses().then(function(n){t.text=n[e].text,t.backgroundColor=n[e].backgroundColor,t.textColor=t.calculateTextColor(t.backgroundColor),t.cd.detectChanges()})):this.isNullValue=!0},enumerable:!0,configurable:!0}),t.prototype.getStatuses=function(){var e=this,n=this.sessionService.domain.id;return n===t.siteId?t.loader?t.loader:new Promise(function(e){return e(t.statuses)}):(t.siteId=n,t.loader=new Promise(function(n){e.topicSearchService.searchTopics({siteId:e.sessionService.domain.id,topicTypeId:e.sessionService.topicTypes.idByName[i.b.CalendarTaskStatus]}).subscribe(function(e){var l={};(e.Result&&e.Result.TopicList?e.Result.TopicList:[]).map(function(e){l[e.TopicId.toString()]={text:e.TopicName,backgroundColor:o.a.getTopicFieldValue(e,"CalendarTaskStatusColor")}}),t.loader=null,t.statuses=l,n(l)})}))},t.statuses={},t}(a.a))}}]);