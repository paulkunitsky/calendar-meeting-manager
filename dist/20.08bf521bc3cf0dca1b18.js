(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"0fzz":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("CcnG"),a=function(){function t(){this.currentStep=1,this.close$=new i.n}return t.prototype.ngOnInit=function(){},t.prototype.isPageLoading=function(){return!1},t.prototype.onPrevious=function(){},t.prototype.onNext=function(){},t.prototype.close=function(){this.close$.emit()},t}()},"1xPc":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("mrSG"),a=n("6blF"),o=(n("8tIk"),n("Cq51"),n("o3mN"),n("SVYi")),r=n("pTjd"),l=n("WwpI"),s=(n("B1F0"),function(t){function e(e,n,i,a){var o=t.call(this)||this;return o.configService=e,o.sessionService=n,o.investigativeSiteService=i,o.alertService=a,o.constants={MODE_DOCUMENTS:1,DI_UPLOADEDFIELD:"uploadedField",DI_METADATAFIELD:"metadataField",DI_FIELDNAME:"fieldName",DI_FIELDTITLE:"fieldTitle",DI_FIELDTYPE:"fieldType",DI_WORKSHEETTITLE:"workSheetTitle",DI_WORKSHEETDATA:"workSheetData",FIELD_TYPE_GLOBAL:"G",FIELD_TYPE_LOCAL:"L",FIELD_TYPE_VIRTUAL:"V",METADATA_TYPE_DOCUMENTS:1,METADATA_TYPE_INVESTIGATIVE_SITES:2,METADATA_TYPE_CONTACTS:3,METADATA_TYPE_DOCUMENT_TYPES:4},o}return Object(i.c)(e,t),e.prototype.isDataValid=function(){if(this.rawData&&0===this.rawData.ErrorCode&&this.rawData.Result)if(this.rawData.Result.Metadata&&this.rawData.Result.Metadata.length>1){if(this.rawData.Result.Metadata[0].Metadata&&this.rawData.Result.Metadata[1].Metadata)return!0;this.alertService.showError("Metadata not found","Import")}else this.alertService.showError("Excel spreadsheet should contain two separate worksheets","Import");return!1},e.prototype.getFieldsFilter=function(t){return function(e){return-1===t.indexOf(e.FieldName)&&!/^\$\$[^\$]+\$\$$/i.test(e.FieldName)}},e.prototype.getFieldsMapper=function(t){var e=this;return function(n){return{name:n.FieldName,title:n.Title,type:t?e.constants.FIELD_TYPE_GLOBAL:e.constants.FIELD_TYPE_LOCAL}}},e.prototype.getFormFieldsData=function(t){return t.Success&&t.Result&&t.Result.length&&t.Result[0].FormFields?t.Result[0].FormFields:[]},e.prototype.ableToEditSiteAndContacts=function(){return!(this.sessionService.user.superAdmin||!this.sessionService.settings.general.document.dontAllowUsersToEditSiteContacts||this.sessionService.room.info.IsCTMSIntegrationEnabled)},e.prototype.getMetadataFields=function(t){var e=o.a.InvestigativeSite,n=[e.SiteGroupId,e.ReaderGroupId,e.EditorGroupId,e.SponsorId,e.Status,e.AutoSiteName,e.AutoSiteNameManualUpdate,e.AutoSiteNameDisablingReason,e.PrincipalInvestigatorId,e.PartialRegulatoryApproval,e.FullRegulatorySubmission,e.FullRegulatoryApproval,e.RegulatoryApprovalStatus,e.SiteContractFinalized,e.RegulatoryApprovalRequest,e.SiteActivationComments,e.ExpectedSubmissionDate,e.NextPreSubmissionDeadlineDate,e.ProjectedIRBApprovalDate,e.ProjectedContractApprovalDate,e.ProjectedSiteActivationDate,e.RegPackEDelivery,e.SiteActivationDate].concat([e.Address,e.City,e.State,e.ZipCode,e.Phone,e.Fax,e.GeoCode]),i=[{name:"$$InvestigativeSiteName$$",title:"Investigative Site Name",type:this.constants.FIELD_TYPE_VIRTUAL}],a=t.filter(this.getFieldsFilter(n)).map(this.getFieldsMapper());return[].concat(a,i)},e.prototype.getSitesFieldNamesToExclude=function(){var t=o.a.InvestigativeSite;return[t.SiteGroupId,t.ReaderGroupId,t.EditorGroupId,t.SponsorId,t.Status,t.AutoSiteName,t.AutoSiteNameManualUpdate,t.AutoSiteNameDisablingReason,t.PrincipalInvestigatorId,t.PartialRegulatoryApproval,t.FullRegulatorySubmission,t.FullRegulatoryApproval,t.RegulatoryApprovalStatus,t.SiteContractFinalized,t.RegulatoryApprovalRequest,t.SiteActivationComments,t.ExpectedSubmissionDate,t.NextPreSubmissionDeadlineDate,t.ProjectedIRBApprovalDate,t.ProjectedContractApprovalDate,t.ProjectedSiteActivationDate,t.RegPackEDelivery,t.SiteActivationDate]},e.prototype.getSitesFieldNamesToExcludeOnDomain=function(){var t=o.a.InvestigativeSite;return this.getSitesFieldNamesToExclude().concat([t.Address,t.City,t.State,t.ZipCode,t.Phone,t.Fax,t.GeoCode])},e.prototype.getSitesRoomMetadataFields=function(t){return t.filter(this.getFieldsFilter(this.getSitesFieldNamesToExclude())).map(this.getFieldsMapper())},e.prototype.getSitesDomainMetadataFields=function(t){return t.filter(this.getFieldsFilter(this.getSitesFieldNamesToExcludeOnDomain())).map(this.getFieldsMapper())},e.prototype.getSitesVirtualFields=function(){return[{name:"$$InvestigativeSiteName$$",title:"Investigative Site Name",type:this.constants.FIELD_TYPE_VIRTUAL}]},e.prototype.getContactsFieldNamesToExclude=function(){return["TimeZone","Locale","$$SiteName$$","$$UserName$$","$$EmailAddress$$","$$Organization$$","IsSiteUser"]},e.prototype.getContactsFieldNamesToExcludeOnDomain=function(){return this.getContactsFieldNamesToExclude().concat([])},e.prototype.getContactsRoomMetadataFields=function(t){return t.filter(this.getFieldsFilter(this.getContactsFieldNamesToExclude())).map(this.getFieldsMapper())},e.prototype.getContactsDomainMetadataFields=function(t){return t.filter(this.getFieldsFilter(this.getContactsFieldNamesToExcludeOnDomain())).map(this.getFieldsMapper())},e.prototype.getContactsVirtualFields=function(){var t=this.constants.FIELD_TYPE_VIRTUAL;return[["$$InvestigativeSiteName$$","Investigative Site Name",t],["$$ContactUserName$$","User Name",t],["$$ContactFirstName$$","First Name",t],["$$ContactLastName$$","Last Name",t],["$$ContactPhoneNumber$$","Phone Number",t],["$$ContactMobileNumber$$","Mobile Number",t],["$$ContactType$$","Contact Type",t],["$$ContactAddress$$","Address",t],["$$ContactCity$$","City",t],["$$ContactState$$","State",t],["$$ContactZip$$","Zip",t],["$$ContactCountry$$","Country",t],["$$ContactActive$$","Active Contact",t]].map(function(t){return{name:t[0],title:t[1],type:t[2]}})},e.prototype.dataAdapter=function(t,e){var n=this,i={siteId:e.siteId,fileToken:t.Result.FilePath,data:t.Result.Metadata,formFields:[],stepFormFields:[]},o={siteId:e.siteId,topicTypeId:e.topicTypeIds[0],fields:null},r={siteId:e.siteId,topicTypeId:e.topicTypeIds[1],fields:null};return new a.a(function(t){n.configService.searchCustomForms(o).subscribe(function(e){var a=[].concat(n.getSitesDomainMetadataFields(n.getFormFieldsData(e)));n.configService.searchCustomForms(r).subscribe(function(e){a=a.concat(n.getSitesRoomMetadataFields(n.getFormFieldsData(e)),n.getSitesVirtualFields()),i.formFields=a,i.stepFormFields[0]=a,n.configService.searchCustomForms(o).subscribe(function(e){var a=[].concat(n.getContactsDomainMetadataFields(n.getFormFieldsData(e)));n.configService.searchCustomForms(r).subscribe(function(e){a=a.concat(n.getContactsRoomMetadataFields(n.getFormFieldsData(e)),n.getContactsVirtualFields()),i.stepFormFields[1]=a,t.next(i)})})})})})},e.prototype.getData=function(t){var e=this;return new a.a(function(n){e.investigativeSiteService.bulkImportInvestigativeSites({siteId:t.siteId,importOptions:{BulkImportMode:1,FilePath:t.token,BulkImportWorkSheetOptions:[]}}).subscribe(function(i){e.rawData=i;var a=e.sessionService.topicTypes.getIds(t.siteId>1?[r.b.InvestigativeSite,r.b.InvestigativeSiteInDataRoom]:[r.b.InvestigativeSite]);e.dataAdapter(i,{siteId:t.siteId,topicTypeIds:a}).subscribe(function(t){n.next(t)})})})},e}(l.a))},"2HNz":function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n("3nIq");var i=n("0fzz"),a=n("nqji"),o=n("QeOu"),r=function(){function t(t){this.sitesActionsAvailabilityService=t}return t.prototype.getActions=function(t,e){return[this.getAddAction(t,e),this.getEditAction(t,e),this.getDeleteAction(t,e),this.getImportAction(t,e),this.getExportAction(t,e),this.getMassCodingAction(t,e),this.getManageSecurityAction(t,e)]},t.prototype.getContextMenuActions=function(t,e){return[[this.getAddAction(t,e),this.getEditAction(t,e),this.getDeleteAction(t,e),this.getAddTofavoriteAction(t,e),this.getRemoveFromFavoriteAction(t,e),this.getImportMetadataAction(t,"Import Metadata",e),this.getImportSitesAction(t,"Import Sites",e),this.getExportAction(t,e),this.getMassCodingAction(t,e)],[this.getManageSecurityAction(t,e)]]},t.prototype.getAddAction=function(t,e){return{text:"Add",icon:"fa fa-plus-circle",dialogComponent:i.a,resultReceiver:t,dialogInitializer:function(t,e,n){t.close$.subscribe(function(t){return n({data:t,cancel:!0,close:!0})})}}},t.prototype.getEditAction=function(t,e){return{text:"Edit",icon:"fa fa-pencil",disabled:!0,handler:function(){return new Promise(function(t){console.log("Edit"),t({cancel:!0})})},updater:function(t,e){t.disabled=1!==e.gridItemsSelected.length},resultReceiver:t}},t.prototype.getDeleteAction=function(t,e){return{text:"Delete",icon:"fa fa-times icon-delete",disabled:!0,handler:function(){return new Promise(function(t){console.log("Delete"),t({cancel:!0})})},updater:function(t,e){t.disabled=!e.gridItemsSelected.length},resultReceiver:t}},t.prototype.getAddTofavoriteAction=function(t,e){var n=this;return{icon:"fa fa-star icon-add-to-favorite",text:"Add to favorite",handler:function(){return new Promise(function(t){console.log("Delete"),t({cancel:!0})})},updater:function(t,e){t.disabled=n.sitesActionsAvailabilityService.isFavoritesActionEnabled(e.gridItemsSelected,!0)}}},t.prototype.getRemoveFromFavoriteAction=function(t,e){var n=this;return{icon:"fa fa-star-o icon-remove-from-favorite",text:"Remove from favorite",handler:function(){return new Promise(function(t){console.log("Delete"),t({cancel:!0})})},updater:function(t,e){t.disabled=n.sitesActionsAvailabilityService.isFavoritesActionEnabled(e.gridItemsSelected,!1)}}},t.prototype.getImportAction=function(t,e){return{text:"Import",icon:"fa fa-arrow-up",items:[[this.getImportMetadataAction(t,"Metadata",e),this.getImportSitesAction(t,"Sites",e)]]}},t.prototype.getExportAction=function(t,e){return{text:"Export",icon:"fa fa-arrow-down",handler:function(){return new Promise(function(t){console.log("Export"),t({cancel:!0})})},resultReceiver:t}},t.prototype.getMassCodingAction=function(t,e){return{text:"Mass Coding",icon:"fa fa-database",disabled:!0,handler:function(){return new Promise(function(t){console.log("Mass Coding"),t({cancel:!0})})},updater:function(t,e){t.disabled=!e.gridItemsSelected.length},resultReceiver:t}},t.prototype.getManageSecurityAction=function(t,e){return{icon:"fa fa-key",text:"Manage Security",disabled:!0,handler:function(){return new Promise(function(t){console.log("Manage Security"),t({cancel:!0})})},updater:function(t,e){t.disabled=!e.gridItemsSelected.length},resultReceiver:t}},t.prototype.getImportMetadataAction=function(t,e,n){return{text:e,icon:"fa fa-file",dialogComponent:o.a,resultReceiver:t,dialogInitializer:function(t,e,n){t.close$.subscribe(function(t){return n({data:t,cancel:!1,close:!0})})}}},t.prototype.getImportSitesAction=function(t,e,n){return{text:e,icon:"fa fa-upload",dialogComponent:a.a,resultReceiver:t,dialogInitializer:function(t,e,n){t.close$.subscribe(function(t){return n({data:t,cancel:!0,close:!0})})}}},t}()},"3nIq":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("SVYi"),a=n("dgYu"),o=function(){function t(){}return t.prototype.isFavoritesActionEnabled=function(t,e){for(var n,o=!0,r=0;r<t.length;r++)n=!!a.a.getTopicFieldValue(t[r].InvestigativeSiteBindedToDataRoom.TopicFields,i.a.InvestigativeSite.MyFavorite),o=o&&(e?n:!n);return o},t}()},Benj:function(t,e,n){"use strict";n.d(e,"a",function(){return S});var i=n("CcnG"),a=n("7+zM"),o=n("OHd8"),r=n("2R3+"),l=n("dfm8"),s=n("PoBK"),u=n("g4Ue"),c=n("ntmm"),d=n("Ip0R"),p=n("gIVc"),f=n("ZBMw"),g=n("3abG"),m=n("r4+f"),v=n("0fzz"),I=i.Ua({encapsulation:2,styles:[],data:{}});function b(t){return i.qb(0,[(t()(),i.Wa(0,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),i.Wa(1,0,null,null,0,"span",[["class","k-icon k-i-loading"],["style","position: absolute; left: 45%; bottom: 50%; font-size: 56px; color: #263A70; z-index: 9999;"]],null,null,null,null,null))],null,null)}function A(t){return i.qb(0,[(t()(),i.Wa(0,0,null,null,29,"kendo-dialog",[["class","modal-window new-document"]],[[2,"wide",null],[1,"dir",0],[1,"tabIndex",0],[2,"k-dialog-wrapper",null]],[[null,"close"],[null,"keydown"]],function(t,e,n){var a=!0,o=t.component;return"keydown"===e&&(a=!1!==i.gb(t,3).onComponentKeydown(n)&&a),"close"===e&&(a=!1!==o.close()&&a),a},a.g,a.d)),i.lb(256,null,o.a,"kendo.dialog",[]),i.lb(131584,null,o.b,o.b,[o.a,[2,r.a],[2,l.a]]),i.Va(3,5488640,null,1,s.a,[i.l,i.H,o.b],null,{close:"close"}),i.mb(335544320,1,{titlebarContent:0}),(t()(),i.Na(16777216,null,1,1,null,b)),i.Va(6,16384,null,0,d.m,[i.T,i.Q],{ngIf:[0,"ngIf"]},null),(t()(),i.Wa(7,0,null,0,10,"kendo-dialog-titlebar",[],[[8,"id",0],[2,"k-window-titlebar",null],[2,"k-dialog-titlebar",null],[2,"k-header",null]],null,null,a.h,a.e)),i.Va(8,49152,[[1,4]],0,u.a,[],null,null),(t()(),i.Wa(9,0,null,0,1,"span",[],null,null,null,null,null)),(t()(),i.ob(-1,null,["New Investigative Site"])),(t()(),i.Wa(11,0,null,0,6,"div",[],null,null,null,null,null)),(t()(),i.Wa(12,0,null,null,1,"ti-step-number-and-circles",[],null,null,null,p.b,p.a)),i.Va(13,49152,null,0,f.a,[],{currentStep:[0,"currentStep"],totalSteps:[1,"totalSteps"]},null),(t()(),i.Wa(14,0,null,null,3,"button",[["class","card-help no-text"],["kendoButton",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0]],[[null,"click"]],function(t,e,n){var a=!0;return"click"===e&&(a=!1!==i.gb(t,17).onClick()&&a),a},null,null)),i.lb(256,null,o.a,"kendo.button",[]),i.lb(131584,null,o.b,o.b,[o.a,[2,r.a],[2,l.a]]),i.Va(17,9125888,null,0,g.a,[i.l,i.H,[2,m.a],o.b,i.B],{look:[0,"look"],iconClass:[1,"iconClass"]},null),(t()(),i.Wa(18,0,null,2,11,"kendo-dialog-actions",[],[[2,"k-button-group",null],[2,"k-dialog-buttongroup",null],[2,"k-dialog-button-layout-stretched",null]],null,null,a.f,a.c)),i.Va(19,49152,null,0,c.a,[i.l],null,null),(t()(),i.Wa(20,0,null,0,4,"button",[["kendoButton",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0]],[[null,"click"]],function(t,e,n){var a=!0,o=t.component;return"click"===e&&(a=!1!==i.gb(t,23).onClick()&&a),"click"===e&&(a=!1!==o.onPrevious()&&a),a},null,null)),i.lb(256,null,o.a,"kendo.button",[]),i.lb(131584,null,o.b,o.b,[o.a,[2,r.a],[2,l.a]]),i.Va(23,9125888,null,0,g.a,[i.l,i.H,[2,m.a],o.b,i.B],null,null),(t()(),i.ob(24,null,["",""])),(t()(),i.Wa(25,0,null,0,4,"button",[["kendoButton",""]],[[2,"k-button",null],[2,"k-state-disabled",null],[2,"k-primary",null],[2,"k-flat",null],[2,"k-bare",null],[2,"k-outline",null],[2,"k-state-active",null],[1,"dir",0]],[[null,"click"]],function(t,e,n){var a=!0,o=t.component;return"click"===e&&(a=!1!==i.gb(t,28).onClick()&&a),"click"===e&&(a=!1!==o.onNext()&&a),a},null,null)),i.lb(256,null,o.a,"kendo.button",[]),i.lb(131584,null,o.b,o.b,[o.a,[2,r.a],[2,l.a]]),i.Va(28,9125888,null,0,g.a,[i.l,i.H,[2,m.a],o.b,i.B],{primary:[0,"primary"],disabled:[1,"disabled"]},null),(t()(),i.ob(-1,null,["Next"]))],function(t,e){var n=e.component;t(e,3,0),t(e,6,0,n.isPageLoading()),t(e,13,0,1,2),t(e,17,0,"flat","fa fa-question"),t(e,23,0),t(e,28,0,!0,n.isPageLoading())},function(t,e){var n=e.component;t(e,0,0,!0,i.gb(e,3).dir,i.gb(e,3).tabIndex,i.gb(e,3).wrapperClass),t(e,7,0,i.gb(e,8).id,i.gb(e,8).className,i.gb(e,8).className,i.gb(e,8).className),t(e,14,0,i.gb(e,17).classButton,i.gb(e,17).classDisabled,i.gb(e,17).classPrimary,i.gb(e,17).isFlat,i.gb(e,17).isBare,i.gb(e,17).isOutline,i.gb(e,17).classActive,i.gb(e,17).dir),t(e,18,0,i.gb(e,19).className,i.gb(e,19).className,i.gb(e,19).className),t(e,20,0,i.gb(e,23).classButton,i.gb(e,23).classDisabled,i.gb(e,23).classPrimary,i.gb(e,23).isFlat,i.gb(e,23).isBare,i.gb(e,23).isOutline,i.gb(e,23).classActive,i.gb(e,23).dir),t(e,24,0,1===n.currentStep?"Cancel":"Previous"),t(e,25,0,i.gb(e,28).classButton,i.gb(e,28).classDisabled,i.gb(e,28).classPrimary,i.gb(e,28).isFlat,i.gb(e,28).isBare,i.gb(e,28).isOutline,i.gb(e,28).classActive,i.gb(e,28).dir)})}var S=i.Sa("ti-site-wizard",v.a,function(t){return i.qb(0,[(t()(),i.Wa(0,0,null,null,1,"ti-site-wizard",[],null,null,null,A,I)),i.Va(1,114688,null,0,v.a,[],null,null)],function(t,e){t(e,1,0)},null)},{siteId:"siteId"},{},[])},Q997:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("mrSG"),a=(n("B1F0"),n("b16z")),o=n("+JNW"),r=function(t){function e(e){var n=t.call(this)||this;return n.investigativeSiteService=e,n.rootNode=null,n.viewMode=0,n.staticRoots=[{FolderName:"All",FolderCount:1,ViewFilterDisplayName:"All"}],n}return Object(i.c)(e,t),e.prototype.requestData=function(t){return this.investigativeSiteService.getInvestigativeSiteViews(t)},e.prototype.convertResponseToResponseItems=function(t){return t.ErrorCode===o.a.SUCCESS&&t.Result.length?t.Result:[]},e.prototype.convertDataToNodeConfig=function(t,e,n){var i=null;if(t.FolderCount||!e){var a=Object.assign({},n);a.viewMode=t?t.ViewMode:0,i=this.getLoader(a)}return{text:t.ViewFilterDisplayName,items:i}},e}(a.a)},VyVB:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){}},dlZs:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("mrSG"),a=n("6blF"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.isDataValid=function(){return!0},e.prototype.getData=function(t){return new a.a(function(t){return t.next(null)})},e}(n("lVH2").a)},pzjd:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("mrSG"),a=n("6blF"),o=n("Hfxt"),r=(n("B1F0"),function(t){function e(e){var n=t.call(this)||this;return n.investigativeSiteService=e,n.constants={MODE_DOCUMENTS:1,DI_UPLOADEDFIELD:"uploadedField",DI_METADATAFIELD:"metadataField",DI_FIELDNAME:"fieldName",DI_FIELDTITLE:"fieldTitle",DI_FIELDTYPE:"fieldType",DI_WORKSHEETTITLE:"workSheetTitle",DI_WORKSHEETDATA:"workSheetData",FIELD_TYPE_GLOBAL:"G",FIELD_TYPE_LOCAL:"L",FIELD_TYPE_VIRTUAL:"V",METADATA_TYPE_DOCUMENTS:1,METADATA_TYPE_INVESTIGATIVE_SITES:2,METADATA_TYPE_CONTACTS:3,METADATA_TYPE_DOCUMENT_TYPES:4},n.importMode=2,n.metadataType=n.constants.METADATA_TYPE_INVESTIGATIVE_SITES,n.sitesMetadataTypeMap=[n.constants.METADATA_TYPE_INVESTIGATIVE_SITES,n.constants.METADATA_TYPE_CONTACTS],n}return Object(i.c)(e,t),e.prototype.isDataValid=function(){return!0},e.prototype.getMetadataAdapter=function(t){return t.filter(function(t){return""!==t.fieldName}).map(function(t){return{KeyName:t.fieldName,KeyValue:t.fieldValue,KeyType:t.fieldType}})},e.prototype.getFieldIdAdapter=function(t){return t.filter(function(t){return""!==t.fieldName}).map(function(t){return t.fieldValue})},e.prototype.getRequestParamsForData=function(t){return{siteId:t.options.siteId,importOptions:{BulkImportMode:this.importMode,FilePath:t.options.fileToken,BulkImportWorkSheetOptions:[{BulkImportMetadataType:this.metadataType,WorkSheetName:t.options.spreadsheetName,MetadataMapping:this.getMetadataAdapter(t.gridData),BulkImportLoadFileType:t.options.fileType,UniqueIdFields:this.getFieldIdAdapter(t.options.uniqueIdFields),DateFormat:t.options.dateFormat}]}}},e.prototype.getRequestParamsForDataArray=function(t){var e=this,n=[];return t.formDataArray&&t.formDataArray.length?t.formDataArray.forEach(function(t,i){n.push({BulkImportMetadataType:e.sitesMetadataTypeMap[i],WorkSheetName:t.options.spreadsheetName,MetadataMapping:e.getMetadataAdapter(t.gridData),BulkImportLoadFileType:t.options.fileType,UniqueIdFields:e.getFieldIdAdapter(t.options.uniqueIdFields),DateFormat:t.options.dateFormat})}):n.push({BulkImportMetadataType:this.metadataType,WorkSheetName:t.options.spreadsheetName,MetadataMapping:this.getMetadataAdapter(t.gridData),BulkImportLoadFileType:t.options.fileType,UniqueIdFields:this.getFieldIdAdapter(t.options.uniqueIdFields),DateFormat:t.options.dateFormat}),{siteId:t.options.siteId,importOptions:{BulkImportMode:this.importMode,FilePath:t.options.fileToken,BulkImportWorkSheetOptions:n}}},e.prototype.showErrorFromResponse=function(t){},e.prototype.dataAdapter=function(t){if(t&&0===t.ErrorCode&&t.Result&&t.Result.JobId)return t.Result.JobId},e.prototype.getData=function(t){var e=this,n=this.getRequestParamsForDataArray(t);return new a.a(t.formDataArray&&t.formDataArray.length&&t.formDataArray[t.index]&&t.index<t.formDataArray.length-1?function(e){e.next(t)}:function(t){e.investigativeSiteService.bulkImportInvestigativeSites(n).subscribe(function(n){e.rawData=n;var i=e.dataAdapter(n);i?t.next(i):(e.showErrorFromResponse(n),t.next(null))},function(e){t.next(null)})})},e}(o.a))},"sBh+":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("mrSG"),a=n("6blF"),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formData=null,e}return Object(i.c)(e,t),e.prototype.isDataValid=function(){return!0},e.prototype.isGridDataValid=function(){return this.formData&&this.formData.gridData&&this.formData.gridData.length},e.prototype.isDateFormatValid=function(){return this.formData&&this.formData.options&&this.formData.options.dateFormat},e.prototype.isFormDataValid=function(t){return this.formData=t,this.isGridDataValid()&&this.isDateFormatValid()},e.prototype.getData=function(t){var e=this;return new a.a(function(n){e.rawData=t,n.next(e.rawData)})},e}(n("xVnt").a)},u7Ob:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("mrSG"),a=(n("B1F0"),function(t){function e(e){var n=t.call(this)||this;return n.investigativeSiteService=e,n}return Object(i.c)(e,t),e.prototype.requestData=function(t){return this.investigativeSiteService.getInvestigativeSites(t)},e.prototype.getTotalCount=function(t){return t.Success&&t.Result.TotalRowCount||0},e.prototype.convertResponseToResponseItems=function(t){return t.Success&&t.Result.InvSitesList||[]},e.prototype.getResponseItemId=function(t){return""+t.InvestigativeSite.TopicId},e}(n("1qEl").a))},xxyC:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){}}}]);