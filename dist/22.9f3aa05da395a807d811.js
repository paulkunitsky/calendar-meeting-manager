(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"2SBh":function(e,t,i){"use strict";i.d(t,"a",function(){return b});var n=i("CcnG"),a=i("vORS"),s=i("O4PX"),o=i("a5mw"),r=i("ZYCi"),l=i("jU+G"),c=i("o3mN"),u=i("9iPZ"),d=i("bCIC"),h=i("Ojfd"),g=i("Tes8"),v=i("RcbL"),p=i("6vNa"),m=i("l6xq"),S=i("YAjq"),w=i("2iVc"),f=i("v7/2"),y=n.Ua({encapsulation:2,styles:[],data:{}});function C(e){return n.qb(0,[(e()(),n.Wa(0,0,null,null,4,"ti-layout-views-with-grid",[["name","users-management"],["viewSelectorTitle","View Users By"]],null,[[null,"viewChange"],[null,"gridSelectionChange"],[null,"gridRowDbClick"]],function(e,t,i){var n=!0,a=e.component;return"viewChange"===t&&(n=!1!==a.onViewChange(i)&&n),"gridSelectionChange"===t&&(n=!1!==a.onGridSelectionChange(i)&&n),"gridRowDbClick"===t&&(n=!1!==a.onGridDbClick(i)&&n),n},a.b,a.a)),n.Va(1,114688,null,0,s.a,[],{name:[0,"name"],viewSelectorTitle:[1,"viewSelectorTitle"],views:[2,"views"],columns:[3,"columns"],actions:[4,"actions"],gridDataOptionsGetter:[5,"gridDataOptionsGetter"],gridViewOptionsGetter:[6,"gridViewOptionsGetter"],gridContextMenuGetter:[7,"gridContextMenuGetter"]},{viewChange:"viewChange",gridSelectionChange:"gridSelectionChange",gridRowDbClick:"gridRowDbClick"}),n.hb(2,1),n.jb(3,{items:0,size:1,resizable:2,collapsible:3,collapsed:4,iconClass:5}),n.hb(4,1)],function(e,t){var i=t.component;e(t,1,0,"users-management","View Users By",i.views,e(t,4,0,e(t,3,0,e(t,2,0,i.codingConfig),"25rem",!0,!0,!0,"fa-list-ul")),i.actions,i.getGridOptions.bind(i),i.getGridViewOptions,i.getGridContextMenu.bind(i))},null)}var b=n.Sa("ng-component",o.a,function(e){return n.qb(0,[(e()(),n.Wa(0,0,null,null,1,"ng-component",[],null,null,null,C,y)),n.Va(1,114688,null,0,o.a,[r.a,l.a,c.a,u.a,d.a,h.a,g.a,v.a,p.a,m.a,S.a,w.a,f.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[])},"7aLo":function(e,t,i){"use strict";var n=i("CcnG"),a=i("Nwml"),s=i("xPTU"),o=i("ZYCi"),r=function(){function e(){this.orientation="horizontal",this.init=new n.n,this.itemsInitialized=0,this.itemsTotal=1}return e.prototype.ngOnInit=function(){var e=this;this.columns.forEach(function(t,i){return e.updateColumn(t,i)})},e.prototype.onLayoutInit=function(e){this.fireOninit()},e.prototype.updateColumn=function(e,t){var i=this;this.itemsTotal+=e.items.length,e.component=s.a,e.initializer=function(n){i.name&&(n.name=i.name+"-column"+t),n.orientation="vertical",n.items=e.items,n.init.subscribe(function(e){return i.fireOninit()})}},e.prototype.fireOninit=function(){this.itemsInitialized++,this.itemsInitialized===this.itemsTotal&&this.init.emit({items:this.columns,instance:this})},e}(),l=n.Ua({encapsulation:2,styles:[],data:{}});function c(e){return n.qb(0,[(e()(),n.Wa(0,0,null,null,1,"ti-layout",[],null,[[null,"init"]],function(e,t,i){var n=!0;return"init"===t&&(n=!1!==e.component.onLayoutInit(i)&&n),n},a.c,a.b)),n.Va(1,4440064,null,0,s.a,[o.a,o.o],{name:[0,"name"],orientation:[1,"orientation"],items:[2,"items"]},{init:"init"})],function(e,t){var i=t.component;e(t,1,0,i.name,i.orientation,i.columns)},null)}i("iAMZ"),i.d(t,"a",function(){return u}),i.d(t,"b",function(){return d});var u=n.Ua({encapsulation:0,styles:[[""]],data:{}});function d(e){return n.qb(0,[(e()(),n.Wa(0,0,null,null,1,"ti-layout-table",[],null,[[null,"init"]],function(e,t,i){var n=!0;return"init"===t&&(n=!1!==e.component.onLayoutInit(i)&&n),n},c,l)),n.Va(1,114688,null,0,r,[],{name:[0,"name"],columns:[1,"columns"]},{init:"init"})],function(e,t){var i=t.component;e(t,1,0,i.name,i.columns)},null)}},O4PX:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("CcnG"),a=i("ZcX7"),s=(i("bMLP"),function(){function e(){var e=this;this.columns=[],this.init=new n.n,this.viewChange=new n.n,this.gridSelectionChange=new n.n,this.gridRowDbClick=new n.n,this.state={layout:null,viewSelectorState:null,gridRequestParams:null,gridItemsSelected:[],grid:null,refreshGrid:function(t){void 0===t?e.grid.instance.refresh():(e.state.gridRequestParams=t.params,e.grid.instance.dataOptions=t)}},this.grid={component:a.a,initializer:this.onGridInit.bind(this)}}return e.prototype.ngOnInit=function(){this.columns.splice(0,0,{items:[this.grid,this.additionalGrid].filter(function(e){return e})})},e.prototype.onLayoutInit=function(e){this.state.layout=e,this.init.emit(this.state)},e.prototype.updateToolbar=function(){this.toolbar&&this.toolbar.update(this.state)},e.prototype.onViewChange=function(e){var t=this;this.state.viewSelectorState=e,this.state.gridItemsSelected=[],this.updateToolbar(),setTimeout(function(){var e=t.gridDataOptionsGetter(t.state);t.state.gridRequestParams=e?e.params:null,t.grid.instance.dataOptions=e,t.gridDetailsGetter&&(t.grid.instance.detailsOptions=t.gridDetailsGetter(t.state)),t.gridToolbarGetter&&(t.grid.instance.toolbarOptions=t.gridToolbarGetter(t.state)),t.gridViewOptionsGetter&&(t.grid.instance.viewOptions=t.gridViewOptionsGetter(t.state)),t.gridContextMenuGetter&&(t.grid.instance.contextMenu=t.gridContextMenuGetter(t.state))},0),this.viewChange.emit(this.state)},e.prototype.onGridInit=function(e,t){var i=this;this.state.grid=e,e.select.subscribe(function(e){i.state.gridItemsSelected=e||[],i.updateToolbar(),i.gridSelectionChange.emit(i.state)}),e.onDoubleClick.subscribe(function(e){return i.gridRowDbClick.emit(i.state)})},e}())},a5mw:function(e,t,i){"use strict";i.d(t,"a",function(){return l}),i("6vNa"),i("bCIC"),i("Ojfd"),i("2iVc"),i("RcbL");var n=i("VX6t"),a=(i("v7/2"),i("o3mN"),i("l6xq"),i("YAjq"),i("Tes8"),i("9iPZ"),i("MGOh")),s=i("k+Yx"),o=i("pTjd"),r=i("eHq/"),l=(i("jU+G"),function(){function e(e,t,i,a,s,o,r,l,c,u,d,h,g){var v=this;this.route=e,this.dialogService=t,this.sessionService=i,this.userManagementViewOrgService=a,this.userManagementViewRoleService=s,this.userManagementViewNameService=o,this.userManagementViewStatusService=r,this.userManagementViewGroupService=l,this.userManagementViewInvSiteService=c,this.gridOptionsService=u,this.usersBySiteGridDataAdapterService=d,this.usersByViewGridDataAdapterService=h,this.userActionsService=g,this.gridViewOptions={pageable:!0,hasHorizontalScroll:!1},this.codingConfig={component:n.a,collapsible:!0,initializer:this.onCodingInit.bind(this)},this.searchText="";var p=[];p.push(this.userActionsService.getClassicInvitationActionItems(function(e){return v.refreshGrid(e.cancel)}),this.userActionsService.getChangeAccessAction(function(e){return v.refreshGrid(e.cancel)}),this.userActionsService.getResendInvitationAction(function(e){return v.refreshGrid(e.cancel)}),this.userActionsService.getClassicExtraActionItems(function(e){return v.refreshGrid(e.cancel)})),this.actions=[p,[this.userActionsService.getSearchAction(function(e){return v.refreshGrid(e.cancel,e.data)})]]}return e.prototype.ngOnInit=function(){this.views=this.route.snapshot.data.views},e.prototype.getGridViewOptions=function(){return this.gridViewOptions},e.prototype.onViewChange=function(e){this.state=e},e.prototype.onGridSelectionChange=function(e){this.codingConfig.instance.refresh(1===e.gridItemsSelected.length?e.gridItemsSelected[0]:null)},e.prototype.getGridContextMenu=function(e){var t=this;return{items:this.userActionsService.getContextMenuActions(),dataGetter:function(){return t.state}}},e.prototype.onGridDbClick=function(e){this.userActionsService.showEditUserDialog(1===e.gridItemsSelected.length?e.gridItemsSelected[0]:null)},e.prototype.getViews=function(){var e=[a.a.Security];return this.sessionService.settings.general.module.enableSSU.get()&&e.push(a.a.StartupSpecialists),[{id:s.a.ByOrganization.toString(),text:"By Organization",value:s.a.ByOrganization,nodes:this.userManagementViewOrgService.getData({searchQuery:"$$UsersCount$$ > 0",siteId:this.sessionService.room.id,topicTypeId:this.sessionService.topicTypes.idByName[o.b.Organization]})},{id:s.a.ByRole.toString(),text:"By Role",value:s.a.ByRole,nodes:this.userManagementViewRoleService.getData({maxRoleLevel:r.a.SUPERADMIN,minRoleLevel:0,siteId:this.sessionService.room.id})},{id:"by_name",text:"By Name",value:0,nodes:this.userManagementViewNameService.getData(null)},{id:s.a.ByStatus.toString(),text:"By Status",value:s.a.ByStatus,nodes:this.userManagementViewStatusService.getData(null)},{id:s.a.ByGroup.toString(),text:"By Group",value:s.a.ByGroup,nodes:this.userManagementViewGroupService.getData({groupTypes:e,siteId:this.sessionService.room.id})},{id:s.a.ByInvestigativeSite.toString(),text:"By Investigative Site",value:s.a.ByInvestigativeSite,nodes:this.userManagementViewInvSiteService.getData({siteId:this.sessionService.room.id,topicTypeId:this.sessionService.topicTypes.idByName[o.b.InvestigativeSiteInDataRoom]})},{id:s.a.ByInvestigativeSiteMainContactsOnly.toString(),text:"By Investigative Site Main Contacts Only",value:s.a.ByInvestigativeSiteMainContactsOnly,nodes:this.userManagementViewInvSiteService.getData({siteId:this.sessionService.room.id,topicTypeId:this.sessionService.topicTypes.idByName[o.b.InvestigativeSiteInDataRoom]})}]},e.prototype.refreshGrid=function(e,t){if(!e){if(void 0===t)return this.state.refreshGrid();this.searchText=t,this.state.refreshGrid(this.getGridOptions(this.state))}},e.prototype.getFilter=function(e,t){switch(e){case s.a.ByOrganization:return t.data.TopicId;case s.a.ByRole:return t.data.RoleLevel;case s.a.ByStatus:return t.data.Id;case s.a.ByGroup:return t.data.GroupId;case s.a.ByInvestigativeSite:case s.a.ByInvestigativeSiteMainContactsOnly:return t.data.ParentId;default:return null}},e.prototype.getGridOptions=function(e){var t=e.viewSelectorState.selectedNodes.length?e.viewSelectorState.selectedNodes[0]:null;if(!t)return null;var i=e.viewSelectorState.selectedView.value;return null===t.parent&&i!==s.a.ByInvestigativeSite&&i!==s.a.ByInvestigativeSiteMainContactsOnly?{dynamicPageSize:!0,params:{minRoleLevel:0,showInactive:!1,searchClause:this.searchText||null,siteId:this.sessionService.room.id},dataService:this.usersBySiteGridDataAdapterService,viewOptions:this.gridOptionsService.getGridViewOptions()}:{dynamicPageSize:!0,params:{filter:this.getFilter(i,t),siteId:this.sessionService.room.id,searchClause:this.searchText||null,viewTypeId:i},dataService:this.usersByViewGridDataAdapterService,viewOptions:this.gridOptionsService.getGridViewOptions()}},e.prototype.onCodingInit=function(e,t){this.coding=e},e}())},iAMZ:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("CcnG"),a=i("5m1U"),s=function(){function e(){this.collapsed=!1,this.init=new n.n,this.viewChange=new n.n,this.viewSelector={component:a.a,initializer:this.onViewSelectorInit.bind(this),updater:this.onViewSelectorChange.bind(this)}}return e.prototype.ngOnInit=function(){this.columns.splice(0,0,{collapsed:this.collapsed,collapsible:!0,resizable:!0,iconClass:"fa-folder-open",label:"viewSelector",size:"25rem",items:[this.viewSelector,this.additionalView].filter(function(e){return e})})},e.prototype.onLayoutInit=function(e){this.init.emit(e)},e.prototype.parseViewQeryParams=function(e){var t=(e.expanded_folders||"").trim(),i=(e.selected_folder||"").trim();return{vm:e.vm?e.vm.trim():null,selectedNodes:i?[i]:[],expandedNodes:""===t?[]:t.split(",")}},e.prototype.viewSelectorStateToQueryParams=function(e){return{vm:e.selectedView.id,selected_folder:e.selectedKeys.length?e.selectedKeys[0]:"",expanded_folders:e.expandedKeys.join()}},e.prototype.onViewSelectorChange=function(e,t,i){var n=this.parseViewQeryParams(t);e.state.update({selectedKeys:n.selectedNodes,expandedKeys:n.expandedNodes}),n.vm&&null!==n.vm&&e.state.selectedView.id!==n.vm&&e.setView(function(e){return e.id===n.vm}),i(this.viewSelectorStateToQueryParams(e.state))},e.prototype.onViewSelectorInit=function(e,t,i){var n=this,a=this.parseViewQeryParams(t);null!==a.vm&&(e.defaultState={selectedKeys:a.selectedNodes,expandedKeys:a.expandedNodes},e.defaultViewGetter=function(e){return e.id===a.vm}),e.title=this.viewSelectorTitle,e.defaultViewStorageName=this.name,e.items=this.views,e.expand.subscribe(function(e){i(n.viewSelectorStateToQueryParams(e))}),e.select.subscribe(function(e){n.onViewChange(e),i(n.viewSelectorStateToQueryParams(e))});var s=!0;e.change.subscribe(function(e){n.onViewChange(e),s||i(n.viewSelectorStateToQueryParams(e)),s=!1})},e.prototype.onViewChange=function(e){this.viewChange.emit(e)},e}()},vORS:function(e,t,i){"use strict";var n=i("CcnG"),a=i("dHVX"),s=i("jU+G"),o=i("bMLP"),r=i("Ip0R"),l=i("7aLo"),c=i("iAMZ");i("O4PX"),i.d(t,"a",function(){return u}),i.d(t,"b",function(){return h});var u=n.Ua({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;height:100%}ti-toolbar[_ngcontent-%COMP%]{display:block;height:3rem;overflow:hidden;background-color:#f9fdf8}ti-layout-views[_ngcontent-%COMP%]{display:block;height:100%}ti-layout-views.with-actions[_ngcontent-%COMP%]{height:calc(100% - 3rem)}"]],data:{}});function d(e){return n.qb(0,[(e()(),n.Wa(0,0,null,null,2,"ti-toolbar",[],null,null,null,a.c,a.a)),n.lb(131584,null,s.a,s.a,[n.k,n.g,n.s]),n.Va(2,4243456,[[1,4]],0,o.a,[s.a,n.i],{actions:[0,"actions"]},null)],function(e,t){e(t,2,0,t.component.actions)},null)}function h(e){return n.qb(0,[n.mb(671088640,1,{toolbar:0}),(e()(),n.Na(16777216,null,null,1,null,d)),n.Va(2,16384,null,0,r.m,[n.T,n.Q],{ngIf:[0,"ngIf"]},null),(e()(),n.Wa(3,0,null,null,1,"ti-layout-views",[],[[2,"with-actions",null]],[[null,"init"],[null,"viewChange"]],function(e,t,i){var n=!0,a=e.component;return"init"===t&&(n=!1!==a.onLayoutInit(i)&&n),"viewChange"===t&&(n=!1!==a.onViewChange(i)&&n),n},l.b,l.a)),n.Va(4,114688,null,0,c.a,[],{name:[0,"name"],viewSelectorTitle:[1,"viewSelectorTitle"],views:[2,"views"],additionalView:[3,"additionalView"],columns:[4,"columns"]},{init:"init",viewChange:"viewChange"})],function(e,t){var i=t.component;e(t,2,0,i.actions),e(t,4,0,i.name,i.viewSelectorTitle,i.views,i.additionalView,i.columns)},function(e,t){e(t,3,0,!!t.component.actions)})}}}]);