(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"/67a":function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n=function(e){return e[e.Normal=1]="Normal",e[e.System=2]="System",e[e.Template=3]="Template",e[e.IncomingProcessing=4]="IncomingProcessing",e[e.Program=5]="Program",e}({})},IxJh:function(e,t,i){"use strict";i.d(t,"b",function(){return n}),i.d(t,"a",function(){return r}),i("NqOl"),i("o3mN");var n=function(){function e(e){this.loginToSiteService=e}return e.prototype.canActivate=function(e,t){var i=this;return new Promise(function(t){var n=+e.paramMap.get("id");i.loginToSiteService.login(n).subscribe(function(e){return t(!e.error&&!!e.site)})})},e}(),r=function(){function e(e,t,i){this.sessionService=e,this.loginToSiteService=t,this.router=i}return e.prototype.canActivate=function(e,t){var i=this;return new Promise(function(t){var n=+e.paramMap.get("id");i.loginToSiteService.login(n).subscribe(function(e){if(e.error||!e.site)return t(!1);i.sessionService.enterRoom(n).subscribe(function(e){if(e.navigationStartUrl==="/ti/room/"+n){var r=e.user.preferences.startPage;r&&i.router.navigateByUrl(e.navigationStartUrl+"/"+r.context+"/"+r.module)}t(!0)})})})},e.prototype.canDeactivate=function(e,t,i,n){var r=this;return new Promise(function(e){return r.sessionService.leaveRoom().subscribe(function(t){return e(!0)})})},e}()},K0HO:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i("6blF"),r=(i("o3mN"),function(){function e(e){this.sessionService=e}return e.prototype.getRouteAvailability=function(e){var t=this;return n.a.create(function(i){t.isRouteAvailabe(e).subscribe(function(r){var o=e.children?e.children.filter(function(e){return!e.redirectTo}):null;if(!o||o&&!o.length)return i.next({available:r,route:t.addNewChilds(e,o),childsAvailability:{}});var a=o.map(function(e){return t.isRouteAvailabe(e)});n.a.zip.apply(n.a,a).subscribe(function(n){var r={},a=o.filter(function(e,t){var i=n[t];return r[e.path]=i,i});i.next({available:!!a.length,route:t.addNewChilds(e,a),childsAvailability:r})})})})},e.prototype.isRouteAvailabe=function(e){var t=this;return n.a.create(function(i){var n=!0;if(e.isAvailable&&(n=e.isAvailable(t.sessionService))&&n.subscribe)return n.subscribe(function(e){return i.next(!!e)});i.next(!!n)})},e.prototype.addNewChilds=function(e,t){return Object.assign({},e,{children:t})},e}())},LTpz:function(e,t,i){"use strict";var n;i.d(t,"a",function(){return n}),function(e){e.PleaseReview="pleasereview",e.Alfresco="alfresco",e.OCR="ocr",e.Flashviewer="flashviewer",e.JasperReports="jasperreports",e.eSignature="esignature",e.IrbIntegration="irbintegration",e.CtmsIntegration="ctmsintegration",e.MilestoneTracking="milestonetracking",e.TiViewer="tiviewer",e.SnowboundViewer="snowboundviewer",e.INCIntegrationNewDataRoomEvent="incintegration.newdataroomevent"}(n||(n={}))},cTc6:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i("o3mN");var n=function(){function e(e){this.sessionService=e,this.routerOutletVisibe=!0}return e.prototype.ngOnInit=function(){var e=this;this.sessionSubscription=this.sessionService.change.subscribe(function(t){"leave-room"===t?e.routerOutletVisibe=!1:"enter-room"===t&&(e.routerOutletVisibe=!0)})},e.prototype.ngOnDestroy=function(){this.sessionSubscription&&this.sessionSubscription.unsubscribe()},e}()},mit6:function(e,t,i){"use strict";i.d(t,"b",function(){return s}),i.d(t,"a",function(){return u});var n=i("CcnG"),r=i("6blF"),o=(i("o3mN"),i("yIpQ")),a=i("ZYCi"),s=(i("K0HO"),new n.r("ti-routes.config")),u=function(){function e(e,t,i,r){var o=this;this.router=t,this.sessionService=i,this.availabilityService=r,this.contextChanged=new n.n,this.domainRoutes=this.findInRoutes(e.nodes,function(e){return e.domainRoot}).route.children,this.roomRoutes=this.findInRoutes(e.nodes,function(e){return e.roomRoot}).route.children,this.router.events.subscribe(function(e){e instanceof a.f&&-1===e.urlAfterRedirects.indexOf("(modal:")&&o.getContexts().subscribe(function(t){var i=o.findInRoutes(t,function(t){var i=e.url.substring(0,e.url.lastIndexOf("?"))||e.url;return-1!==t.url.indexOf(i)||(i=e.urlAfterRedirects.substring(0,e.urlAfterRedirects.lastIndexOf("?"))||e.urlAfterRedirects,-1!==t.url.indexOf(i))}),n=i.parent||i.route;o.contextChanged.emit({oldContext:o.currentContext,newContext:n}),o.sessionService.room.id?o._currentRoomContext=n:o._currentDomainContext=n})})}return Object.defineProperty(e.prototype,"currentContext",{get:function(){return(this.sessionService.room.id?this._currentRoomContext:this._currentDomainContext)||{}},enumerable:!0,configurable:!0}),e.prototype.getLinks=function(){var e;return this.sessionService.room.id||(e=this.sessionService.settings.general.general.externalServicesConfig.get(!0).filter(function(e){return e.enabled}).map(function(e){return{image:"assets/media/app-link/e-feasibility.png",url:e.url,text:e.name}})),r.a.of(e||[])},e.prototype.getContexts=function(){var e=this;return r.a.create(function(t){var i=e.sessionService.room.id||e.sessionService.domain.id;i===e.lastRoomId&&e.contexts&&t.next(e.contexts),e.lastRoomId=i,e.getCurrentContexts().subscribe(function(i){e.contexts=i,t.next(i)})})},e.prototype.findInRoutes=function(e,t,i){if(e)for(var n=0,r=e;n<r.length;n++){var o=r[n];if(t(o))return{route:o,parent:i};var a=this.findInRoutes(o.children,t,o);if(a)return a}},e.prototype.getCurrentContexts=function(){var e=this;return r.a.create(function(t){var i=(e.sessionService.room.id?e.roomRoutes:e.domainRoutes).map(function(t){return e.availabilityService.getRouteAvailability(t)});e.getParentUrls().subscribe(function(n){var o=n[0],a=n[1];r.a.zip.apply(r.a,i).subscribe(function(i){var n=e.sessionService.room.id?a:o,r=e.sessionService.room.id?"$$ROOM$$":"$$DOMAIN$$",s=i.filter(function(e){return e.available}).map(function(e){return e.route}),u=e.sessionService.settings.general.general.modulesTitles.get();t.next(e.updateRoutes(s,r,u,n,o,function(e){return!!e}))})})})},e.prototype.updateRoutes=function(e,t,i,n,r,a){var s=this;if(e)return e.filter(a).map(function(e){var a=e.path===o.a.domain?r:n+"/"+e.path,u=t+"/"+e.path;return Object.assign({},e,{url:a,id:u,originalText:e.text||e.path,text:i[u]||e.text||e.path,children:s.updateRoutes(e.children,u,i,a,r,function(e){return!!e})})})},e.prototype.getParentUrls=function(){var e=this;return r.a.create(function(t){for(var i=!1,n=!1,o=[],a=[],s=e.router.routerState.root;s&&(!i||!n);){!i&&o.push(s.url),!n&&a.push(s.url);var u=s.routeConfig;i=i||u&&u.domainRoot,n=n||u&&u.roomRoot,s=s.firstChild}r.a.zip(r.a.zip.apply(r.a,o),r.a.zip.apply(r.a,a)).subscribe(function(e){var i=e[1],n=function(e){return e.map(function(e){return e.map(function(e){return e.path}).join("/")}).filter(function(e){return""!==e}).join("/")};t.next(["/"+n(e[0]),"/"+n(i)])})})},e}()},wlho:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i("mit6"),i("nXVS");var n=function(){function e(e,t){this.contextGetter=e,this.loadingService=t,this.availableModules=[]}return e.prototype.ngOnInit=function(){var e=this;this.loadingService.toggleMode(),this.setavailableModules(this.contextGetter.currentContext),this.contextGetterSubs=this.contextGetter.contextChanged.subscribe(function(t){return e.setavailableModules(t.newContext)})},e.prototype.ngOnDestroy=function(){this.loadingService.toggleMode(),this.contextGetterSubs&&this.contextGetterSubs.unsubscribe()},e.prototype.setavailableModules=function(e){this.availableModules=(e&&e.children?e&&e.children:[]).filter(function(e){return e.forSidebar})},e}()},xAry:function(e,t,i){"use strict";var n,r=i("wlho"),o=i("yIpQ"),a=i("IxJh"),s=i("cTc6"),u=i("rV5w"),l=i("vz9p"),c=i("LTpz"),d=i("dgYu");!function(e){e.Alfresco="Alfresco",e.Domino="Domino"}(n||(n={}));var f=i("/67a"),m=i("xGRp"),p=i("aqRs"),g=i("SVYi");i.d(t,"a",function(){return b}),i.d(t,"b",function(){return A});var b=function(){function e(){}return e.isUserAuditor=function(e){return!!e.user.details.IsUserAuditor},e.isUserAuditorsManager=function(e){return!!e.user.details.IsUserAuditorsManager},e.isUserFixer=function(e){return!!e.user.details.IsUserAuditResponseUser},e.isUserExternalAuditor=function(e){return!!e.user.details.AdditionalInfo.IsUserExternalAuditor},e.isSiteUser=function(e){return!!e.room.info&&e.room.info.IsSiteUser},e.isTemplateSite=function(e){return e.room.info&&e.room.info.SiteTypeId===f.a.Template},e.isMilestoneTrackingEnabled=function(e){return-1!==Object(l.a)().serverCfg.disabledFeatures.indexOf(c.a.MilestoneTracking)&&(!e.room.id||e.settings&&e.settings.general.module.enableMilestone.get()&&(e.user.adminOrHigher||e.user.hasAction(m.a.Milestones)))},e.isIn=function(e,t){return e?!!t.room.id:!t.room.id},e.isTaskModuleAvailable=function(t,i){return e.isIn(t,i)&&i.settings&&i.settings.general.module.enableTasks.get()&&!e.isSiteUser(i)&&!e.isTemplateSite(i)&&!e.isUserExternalAuditor(i)},e}(),h=tiStrings.app.routingTexts,v=[{path:"main",text:"main",icon:"fa fa-cogs",forSidebar:!0,loadChildren:"./pages/user-profile-main/user-profile-main.module#UserProfileMainModule"},{path:"notifications",text:"notifications",icon:"fa fa-bell",forSidebar:!0,loadChildren:"./pages/user-profile-notifications/user-profile-notifications.module#UserProfileNotificationsModule"},{path:"**",redirectTo:"main"}],A=[{path:"",domainRoot:!0,component:r.a,children:[{path:"room/:id",roomRoot:!0,canActivate:[a.a],canDeactivate:[a.a],component:s.a,children:[{path:o.a.domain,redirectTo:"etmf",text:"home",icon:"fa fa-home",cantRedirectTo:!0,cantBeActive:!0,forAppMenu:!0},{path:"etmf",text:"etmf",icon:"fa fa-flask",forAppMenu:!0,canActivate:[o.b],children:[{path:"dashboard",text:"dashboard",icon:"fa fa-tachometer",forSidebar:!0,loadChildren:"./pages/dashboard/dashboard.module#DashboardModule",isAvailable:function(e){return!b.isSiteUser(e)&&!b.isTemplateSite(e)}},{path:"documents",text:"documents",icon:"fa fa-file",forSidebar:!0,loadChildren:"./pages/documents/documents.module#DocumentsModule",isAvailable:function(e){return!b.isSiteUser(e)&&!b.isTemplateSite(e)}},{path:"sites",text:"sites",icon:"fa fa-flask",canActivate:[o.b],forSidebar:!0,isAvailable:function(e){return e.settings&&e.settings.general.module.enableETMF.get()&&(e.user.isModuleAccessible(p.a.etmf)||e.user.isModuleAccessible(p.a.ssu))&&!b.isSiteUser(e)&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)},children:[{path:"",loadChildren:"./pages/etmf-sites/etmf-sites-container.module#EtmfSitesContainerModule"},{path:"sites",loadChildren:"./pages/etmf-sites/etmf-sites.module#EtmfSitesModule"},{path:"profile",text:"profile",loadChildren:"./pages/etmf-sites/site-profile.module#SiteProfileModule"},{path:"essential-documents",text:"essentialDocuments",icon:"fa fa-home",forAppMenu:!1,canActivate:[o.b],loadChildren:"./pages/etmf-sites/essential-documents.module#EssentialDocumentsModule"},{path:"**",redirectTo:""}]},{path:"communications",text:"communications",icon:"fa fa-inbox",forSidebar:!0,loadChildren:"./pages/etmf-communications/etmf-communications.module#EtmfCommunicationsModule",isAvailable:function(e){return e.settings&&e.settings.general.module.enableETMF.get()&&(e.user.isModuleAccessible(p.a.etmf)||e.user.isModuleAccessible(p.a.ssu))&&!b.isSiteUser(e)&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)}},{path:"contacts",text:"contacts",icon:"fa fa-user",forSidebar:!0,loadChildren:"./pages/etmf-contacts/etmf-contacts.module#EtmfContactsModule",isAvailable:function(e){return e.settings&&e.settings.general.module.enableETMF.get()&&(e.user.isModuleAccessible(p.a.etmf)||e.user.isModuleAccessible(p.a.ssu))&&!b.isSiteUser(e)&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)}},{path:"milestones",text:"milestones",icon:"fa fa-trophy",forSidebar:!0,loadChildren:"./pages/milestones/milestones.module#MilestonesModule",isAvailable:function(e){return b.isMilestoneTrackingEnabled(e)&&!b.isSiteUser(e)&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)}},{path:"**",redirectTo:"documents"}]},{path:"startup",text:"startUp",icon:"fa fa-flask",canActivate:[o.b],forAppMenu:!0,children:[{path:"communications",text:"communications",icon:"fa fa-inbox",canActivate:[o.b],forSidebar:!0,loadChildren:"./pages/ssu-communications/ssu-communications.module#SsuCommunicationsModule",isAvailable:function(e){return e.settings&&e.settings.general.module.enableSSU.get()&&e.user.isModuleAccessible(p.a.ssu)&&!b.isSiteUser(e)&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)}},{path:"**",redirectTo:"communications"}]},{path:"faq",text:"faq",icon:"fa fa-comment",canActivate:[o.b],forAppMenu:!0,loadChildren:"./pages/faq/faq.module#FaqModule",isAvailable:function(e){return e.settings&&e.settings.general.module.enableQA.get()&&!b.isSiteUser(e)&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)}},{path:"qa",text:"qa",icon:"fa fa-comments",canActivate:[o.b],forAppMenu:!0,loadChildren:"./pages/qa/qa.module#QAModule",isAvailable:function(e){return e.settings&&e.settings.general.module.enableQA.get()&&!b.isSiteUser(e)&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)}},{path:"authoring",text:"authoring",icon:"fa fa-pencil",forAppMenu:!0,canActivate:[o.b],loadChildren:"./pages/authoring/authoring.module#AuthoringModule",isAvailable:function(e){return e.settings&&e.settings.general.module.enableDocumentCollaboration.get()&&e.user.isModuleAccessible(p.a.collaboration)&&!b.isSiteUser(e)&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)}},{path:"tasks",text:"tasks",icon:"fa fa-tasks",canActivate:[o.b],forAppMenu:!0,isAvailable:function(e){return b.isTaskModuleAvailable(!0,e)},loadChildren:"./pages/tasks/tasks.module#TasksModule"},{path:"quality-review",text:"qualityReview",icon:"fa fa-book",forAppMenu:!0,canActivate:[o.b],children:[{path:"audit",text:"audit",icon:"fa fa-book",forSidebar:!0,loadChildren:"./pages/audit/audit.module#AuditModule",isAvailable:function(e){return!0}},{path:"documents",text:"documents",icon:"fa fa-file",forSidebar:!0,loadChildren:"./pages/documents/documents.module#DocumentsModule",isAvailable:function(e){return!0}},{path:"audit-settings",text:"auditSettings",icon:"fa fa-cogs",forSidebar:!0,loadChildren:"./pages/audit-settings/audit-settings.module#AuditSettingsModule",isAvailable:function(e){return!0}},{path:"**",redirectTo:"audit-settings"}]},{path:"users-management",text:"usersManagement",icon:"fa fa-users",canActivate:[o.b],forAppMenu:!0,children:[{path:"users",text:"users",icon:"fa fa-user",canActivate:[o.b],forSidebar:!0,loadChildren:"./pages/users-management/users-management.module#UsersManagementModule",isAvailable:function(e){return e.user.adminOrHigher&&!b.isSiteUser(e)&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)}},{path:"contacts",text:"contacts",icon:"fa fa-user-o",canActivate:[o.b],forSidebar:!0,loadChildren:"./pages/users-management/contacts-management.module#ContactsManagementModule",isAvailable:function(e){return e.user.adminOrHigher&&!b.isSiteUser(e)&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)}},{path:"groups",text:"groups",icon:"fa fa-users",canActivate:[o.b],forSidebar:!0,loadChildren:"./pages/groups-management/groups-management.module#GroupsManagementModule",isAvailable:function(e){return e.user.adminOrHigher&&!b.isSiteUser(e)&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)}},{path:"**",redirectTo:"users"}]},{path:"communication",text:"communication",icon:"fa fa-envelope",canActivate:[o.b],forAppMenu:!0,children:[{path:"inbox",text:"inbox",icon:"fa fa-inbox",canActivate:[o.b],forSidebar:!0,loadChildren:"./pages/inbox/inbox.module#InboxModule",isAvailable:function(e){var t=!!e.user.details.Actions.find(function(e){return e.ActionId===m.a.Communication})&&e.user.editor,i=e.settings&&e.settings.general.module.enableEmail.get(),r=e.settings&&e.settings.general.inbox.enableInbox.get();if(!i||!r||!e.user.adminOrHigher&&!t||b.isTemplateSite(e)||b.isUserExternalAuditor(e)||b.isSiteUser(e))return!1;var o=Object(l.a)(),a=o.serverCfg.inboxServer===n.Alfresco;return o.isMultitenantInstance?u.b.create(function(t){e.room.getCurrentSponsor().subscribe(function(e){var i=d.a.getTopicFieldValue(e.TopicFields,g.a.Sponsor.InboxServer),r=e&&i||"";t.next(r===n.Alfresco||""===r&&a)})}):a}},{path:"outbox",text:"outbox",icon:"fa fa-envelope-open",canActivate:[o.b],forSidebar:!0,loadChildren:"./pages/outbox/outbox.module#OutboxModule",isAvailable:function(e){var t=e.settings&&e.settings.general.module.enableEmail.get(),i=e.user.adminOrHigher,n=e.user.details.Actions.find(function(e){return e.ActionId===m.a.Communication})||!1;return t&&(i||n&&e.user.editor)&&!b.isSiteUser(e)&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)}},{path:"**",redirectTo:"inbox"}]},{path:"user-profile",text:h.myProfile,icon:"fa fa-user",isAvailable:function(e){return b.isIn(!0,e)},children:v},{path:"settings",text:h.settings,icon:"fa fa-cogs",canActivate:[o.b],isAvailable:function(e){return!!e.room.id&&e.user.adminOrHigher&&!b.isUserExternalAuditor(e)},forAppMenu:!0,loadChildren:"./pages/settings/settings.module#SettingsModule"},{path:"**",redirectTo:"etmf"}]},{path:"ca",loadChildren:"./pages//settings/settings.module#SettingsModule"},{path:"dashboard",text:"home",icon:"fa fa-home",forAppMenu:!0,loadChildren:"./pages/domain-dashboard/domain-dashboard.module#DomainDashboardModule"},{path:"datarooms",text:"datarooms",icon:"fa fa-industry",canActivate:[o.b],forAppMenu:!0,children:[{path:"rooms",text:"datarooms",icon:"fa fa-asterisk",canActivate:[o.b],forSidebar:!0,loadChildren:"./pages/rooms-management/rooms-management.module#RoomsManagementModule",isAvailable:function(e){return e.user.superAdmin&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)}},{path:"programs",text:"programs",icon:"fa fa-database",canActivate:[o.b],forSidebar:!0,loadChildren:"./pages/programs-management/programs-management.module#ProgramsManagementModule",isAvailable:function(e){return e.user.editorOrHigher&&e.user.isModuleAccessible(p.a.programsmanagement)&&!b.isTemplateSite(e)&&!b.isUserExternalAuditor(e)}},{path:"**",redirectTo:"rooms"}]},{path:"tasks",text:"tasks",icon:"fa fa-tasks",canActivate:[o.b],forAppMenu:!0,isAvailable:function(e){return b.isTaskModuleAvailable(!1,e)},loadChildren:"./pages/tasks/tasks.module#TasksModule"},{path:"user-profile",text:"myProfile",icon:"fa fa-user",isAvailable:function(e){return b.isIn(!1,e)},children:v},{path:"settings",text:"settings",icon:"fa fa-cogs",canActivate:[o.b],isAvailable:function(e){return!e.room.id&&e.user.superAdmin},forAppMenu:!0,loadChildren:"./pages/settings/settings.module#SettingsModule"},{path:"**",redirectTo:"dashboard"}]}]},yIpQ:function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return o});var n,r=i("rV5w");i("K0HO"),function(e){e.domain="$$DOMAIN$$"}(n||(n={}));var o=function(){function e(e,t){this.router=e,this.availabilityService=t}return e.prototype.canActivate=function(e,t){var i=this;return r.b.create(function(n){return i.availabilityService.getRouteAvailability(e.routeConfig).subscribe(function(r){!r.available&&e.parent&&e.parent.routeConfig&&i.availabilityService.getRouteAvailability(e.parent.routeConfig).subscribe(function(n){var r=(n.route.children||[]).filter(function(e){return!e.cantRedirectTo}),o="/"+e.url.map(function(e){return e.path}).join("/"),a=t.url.substring(0,t.url.lastIndexOf(o));if(r.length)i.router.navigateByUrl(a+"/"+r[0].path);else{var s=a.substring(0,a.lastIndexOf("/"));i.router.navigateByUrl(s)}}),n.next(r.available)})})},e}()}}]);